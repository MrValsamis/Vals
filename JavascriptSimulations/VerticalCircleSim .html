<!doctype html><html> <head> <meta name="description" content="centripetal force Vertical circle"> <title>VerticalCircleSim</title> <meta name="keywords" content="VerticalCircleSim, centripetal, force, Vertical, physics, string, rod, ramp, tension"> <meta name="author" content="Martin Kirby"> <meta name="robots" content="index, follow"> <meta name="revisit-after" content="1 month"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta content="yes" name="apple-mobile-web-app-capable"/> <meta id="extViewportMeta" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"> <meta name="apple-touch-fullscreen" content="yes"> <script src="./app.js" charset="utf-8"> .form_control{width:auto; text-align:center; padding:20px;}img{max-width:400%; height:auto;}</head> <script type="application/ld+json"> [{@context" : "http://schema.org", "@type" : "WebApplication", "url" : "kirbyx.com", "author" :{"@type" : "Person", "name" : "Martin Kirby"},"browserRequirements" : "requires HTML5 support","applicationCategory" : "simulation","applicationSubCategory" : "physics waves","fileSize" : "82KB"},{"@context" : "http://schema.org","@type" : "SoftwareApplication","author" :{"@type" : "Person","name" : "Martin Kirby"}}] </script> <body> <html> <div.class=theWholeThing> <canvas id="mainCanvas" style="z-index: -1; position:absolute; left:0%; top:0px; "> </canvas> <canvas id="backgroundCanvas" style="z-index: -2; position:absolute; left:0%; top:0px; "> </canvas> <canvas id="equations" style="z-index: -3; position:absolute; touch-action: auto; "> </canvas> <canvas id="info" style="z-index: -3; position:absolute; touch-action: auto; "> </canvas> <canvas id="vertdonate" style="z-index: -3; position:absolute; touch-action: auto; "> </canvas> <canvas id="graph" style="z-index: -3; position:absolute; touch-action: auto; "> </canvas> <div class="boxforbuttons"> <div class="smallbuttons"> <buttonblue type="button" id="slowButton"> <b>Slow</b></buttonblue> <buttonblue type="button" id="resetButton"> <b>Reset</b></buttonblue> <buttonblue type="button" id="startButton"> <b>Start</b></buttonblue> <buttonblue type="button" id="pauseButton"> <b>Pause</b></buttonblue> </div></div><div class="boxforallradiobuttons" id=boxforPVTQ> <label class="container">Ball on a vertical light rod <input type="radio" id=ballonrod name="radio"> <span class="checkmark"></span> </label> <label class="container">Ball on a vertical light string <input type="radio" id=ballonstring checked name="radio"> <span class="checkmark"></span> </label> <label class="container">Ball on a vertical circular track <input type="radio" id=ballontrack name="radio"> <span class="checkmark"></span> </label> <label class="container">Ball ramps into a vertical circular track <input type="radio" id=ballonramp name="radio"> <span class="checkmark"></span> </label> </div></div></div><form action="https://www.paypal.com/donate" method="post" target="_top"> <label class="form-control"> <input type="hidden" name="hosted_button_id" value="2NECQZSMXYCCJ"/> <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" title="PayPal" alt="Donate when online" style="border: 0px none ; padding: 0px; width: 600%; height: 100%;"/> <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1"/> </label><br><br></form> <div class="boxforcheckboxes" id="mycheckboxes"> <div class="boxforleftcheckboxes" id=boxforPVRadio > <label class="hello"> <input type="checkbox" onclick="dotheweightnow()" id=showweight name="checkbox" style="color:red;float: left;">Show force of gravity</label> <label class="hello"> <input type="checkbox" onclick="dothetensionnow()" id=showtension name="checkbox" style="color:red;float: left;">Show tension / normal force</label> <label class="hello"> <input type="checkbox" onclick="dothecentrifnow()" id=showcentrif name="checkbox"style="color:red;float: left;" >show total radial force</label> <label class="hello"> <input type="checkbox" onclick="dothetotalforcenow()" id=showtotalforce name="checkbox"style="color:red;float: left;" >Show total force</label> <label class="hello"> <input type="checkbox" onclick="dothespeednow()" id=showspeed name="checkbox"style="color:#36b1dc;float: left;" >show speed</label> <label class="hello"> <input type="checkbox" onclick="dothetotalaccnnow()" id=showtotalaccn name="checkbox"style="color:darkorchid;float: left;" >Show acceleration</label> <label class="hello"> <input type="checkbox" onclick="dothetotalcomponentsnow()" id=showcomps name="checkbox"style="color:black;float: left;" >Show components</label> <label class="hello"> <input type="checkbox" onclick="showvals()" id=showvalues name="checkbox"style="color:black;float: left;" >Show values</label> </div><div class="boxforrightcheckboxes" id=boxforPVRadio> <label class="hello"> <input type="checkbox" onclick="dotheenergynow()" id=showenergy check name="checkbox"style="color:black;float: left;" >Show energy bar chart</label> <label class="hello"> <input type="checkbox" onclick="showgraphbox()" id=graphnowid name="checkbox"style="color:black;float: left;" >show motion or energy graphs</label> <label class="hello"> <input type="checkbox" onclick="freezetop()" id=freezetopid name="checkbox" style="color:black;float: left;">Freeze to top</label> <label class="hello"> <input type="checkbox" onclick="freezeside()"id=freezesideid name="checkbox"style="color:black;float: left;" >Freeze to side</label> <label class="hello"> <input type="checkbox" onclick="freezebottom()"id=freezebottomid name="checkbox"style="color:black;float: left;" >Freeze to bottom</label> <label class="hello"> <input type="checkbox" onclick="dotheflyaway()" id=ballflyaway name="checkbox"style="color:black;float: left;" >No rod, string or track</label> <label class="hello"> <input type="checkbox" onclick="showtheequations()" id=equationid name="checkbox"style="color:black;float: left;" >Information</label> <label class="hello" style="color:lightgray;"> <input type="checkbox" onclick="showinfobox()"id=infoid name="checkbox"style="color:lightgray;float: left;" >Donate?</label> </div></div><div class="boxforsliders" id="sliderbox"> <p style="line-height:0%" id="pradius">3 m3=radius </p><bdo dir="ltr"><span id="radiusSliderValue"> </span> <input type="range" min="0.1" max="0.951" step="0.01" value="0.7" class="DarkBlueslider" id="radiusRange"></bdo><br><p style="line-height:0%" id="pmass"> 5=mass</p><bdo dir="ltr"><span id="massSliderValue"></span><input type="range" min="0.1" max="10" step="0.1" value="3" class="DarkBlueslider" id="massRange"></bdo><br><p style="line-height:0%" id="pgravity"> 5=g</p><bdo dir="ltr"><span id="gSliderValue"></span><input type="range" min="0.0" max="50" step="0.1" value="10" class="DarkBlueslider" id="gRange"></bdo><br><p style="line-height:0%" id="pspeed"> 5=angle</p><bdo dir="ltr"><span id="speedSliderValue"></span><input type="range" min="0" max="8" step="0.001" value="0" class="DarkBlueslider" id="speedRange"></bdo><br><p style="line-height:0%" id="pballheight"> 5=angle</p><bdo dir="ltr"><span id="ballheightSliderValue"></span><input type="range" min="0" max="2" step="0.01" value="0.25" class="DarkBlueslider" id="ballheightRange"></bdo><br></div>

<style>
html{font-family:sans-serif}body,html{overscroll-behavior-y:none;overscroll-behavior-x:none}input:disabled{background:#fff;background-color:#fff}#mainCanvas{position:absolute;touch-action:auto;float:left;left:0;top:0;background-color:transparent;opacity:1}#backgroundCanvas{position:absolute;touch-action:auto;float:left;left:0;top:0;background-color:#fff;opacity:1}#info{width:60%;position:absolute;touch-action:auto;height:40vh;right:20%;top:20%;float:right;background-color:#fff;opacity:1}#equations{width:80%;position:absolute;touch-action:auto;height:80vh;right:10%;float:right;background-color:#fff;opacity:1}#graph{width:50%;position:absolute;touch-action:auto;height:64.5vh;top:.5%;right:.25%;float:right;background-color:#fff;opacity:1}:root{--form-control-color:green}*,:after,:before{box-sizing:border-box}body{margin:2vmin;overflow:hidden}form{touch-action:auto;margin:1vmin;position:absolute;top:.4%;right:1%;line-height:1vmin;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.form-control{font-family:system-ui,sans-serif;font-size:2vmin;line-height:2vmin;display:grid;grid-template-columns:1.5vmin auto;grid-template-rows:2.5vmin auto;gap:5vmin;cursor:pointer}.form-control+.form-control{margin-top:1%}div.boxforcheckboxes{touch-action:auto;margin:1vmin;border:0 solid #d3d3d3;-webkit-tap-highlight-color:transparent;position:absolute;top:0;left:48%;right:20%;line-height:1vmin;height:35%;flex-direction:column;flex-wrap:wrap;justify-content:left;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.boxforleftcheckboxes{touch-action:auto;margin:0;padding-left:10%;padding-top:2%;border:0 solid #d3d3d3;-webkit-tap-highlight-color:transparent;width:90%;position:absolute;font-weight:700;font-size:2vmin;line-height:1.5vmin;top:10%;height:100%;left:0;right:0;display:flex;background-color:transparent;flex-direction:column;flex-wrap:wrap;justify-content:left;cursor:pointer}div.boxforrightcheckboxes{touch-action:auto;margin:0;padding-top:2%;border:0 solid #d3d3d3;-webkit-tap-highlight-color:transparent;width:80%;position:absolute;font-weight:700;font-size:2vmin;line-height:1.5vmin;top:10%;bottom:0;height:100%;left:90%;right:0;display:flex;background-color:transparent;flex-direction:column;flex-wrap:wrap;justify-content:left;cursor:pointer}label{display:flex;align-items:center}input[type=checkbox]{-webkit-appearance:none;appearance:none;background-color:transparent;margin:1.5%;font:5vmin;color:currentColor;width:3vmin;height:3vmin;border:.29em solid currentColor;border-radius:1.5em;transform:translateY(-.075em);display:grid;place-content:center;cursor:pointer}input[type=checkbox]:hover{background-color:pink;cursor:pointer}input[type=checkbox]::before{content:"";width:2vmin;height:2vmin;top:-20px;bottom:-20px;left:-20px;right:-20px;clip-path:polygon(14% 44%,0 65%,50% 100%,100% 16%,80% 0%,43% 62%);transform:scale(0);transform-origin:bottom left;box-shadow:inset 0 0;background-color:#000;cursor:pointer}input[type=checkbox]:checked::before{transform:scale(1)}input[type=checkbox]:disabled{border-color:#000;color:#ccc;background-color:#000}div.boxforallradiobuttons{touch-action:auto;margin:0;padding-left:2%;padding-top:0;border:0 solid #d3d3d3;-webkit-tap-highlight-color:transparent;width:48%;position:absolute;top:42%;height:18%;font-size:2.3vmin;left:49.7%;right:1%;background-color:transparent;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.container{display:block;position:relative;padding-left:4vmin;padding-top:0;padding-bottom:1vmin;margin-bottom:1vmin;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.container input{position:absolute;opacity:0;cursor:pointer}.checkmark{position:absolute;top:0;left:0;height:3vmin;width:3vmin;background-color:#d3d3d3;border-radius:50%}.container:hover input~.checkmark{background-color:pink}.container input:checked~.checkmark{background-color:red}.checkmark:after{content:"";position:absolute;display:none}div.boxforbuttons{touch-action:auto;border:0 solid #d3d3d3;-webkit-tap-highlight-color:transparent;position:absolute;bottom:2%;left:0;width:55%;height:8%;font-size:6.5vmin;flex-direction:column;display:flex-end;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.bigbuttons{touch-action:auto;margin:0;padding-left:0;border:0 solid #d3d3d3;-webkit-tap-highlight-color:transparent;width:100%;position:absolute;font-size:6.5vmin;line-height:2vmin;align-content:center;flex-direction:row;flex-wrap:wrap;justify-content:center}div.smallbuttons{margin:0;padding:0;text-align:center;touch-action:auto;display:table-row;border:0 solid #d3d3d3;-webkit-tap-highlight-color:transparent;width:100%;position:absolute;align-content:center;bottom:0;font-size:6vmin;line-height:2vmin;flex-direction:row;flex-wrap:wrap;bottom:0;justify-content:space-around}buttonblue{display:inline-grid;background-color:#d3d3d3;border-radius:10px;border:px solid #fff;color:#fff;text-align:center;font-size:2.5vmin;padding:1vmin;width:20%;-webkit-transition:all .1s;-moz-transition:all .1s;-o-transition:all .1s;transition:all .1s;cursor:pointer;margin:2px;box-shadow:0 4px #000}buttonblue:hover{background-color:#00008b}buttonblue:active{background-color:#00f;box-shadow:0 0 #000;transform:translateY(4px)}div.boxforsliders{touch-action:auto;-webkit-tap-highlight-color:transparent;border:0 solid red;position:fixed;width:40%;line-height:20%;bottom:3%;right:5%;font-family:sans-serif,Helvetica,sans-serif;font-weight:700;font-size:2vmin;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}input[type=range].DarkBlueslider{line-height:20%;-webkit-appearance:none;height:2.5vh;width:100%;left:5%;position:right;margin:0;padding-top::0px;padding-bottom:0;direction:ltr;opacity:1;-webkit-transition:.1s;transition:0s;cursor:pointer}input[type=range].DarkBlueslider:hover{background-color:#ff0;height:2.5vh;-webkit-appearance:none;opacity:1}input[type=range].DarkBlueslider:disabled{height:2.5vh;background-color:#000;-webkit-appearance:none;opacity:1}input[type=range].DarkBlueslider::-moz-range-thumb{border:0 solid #000;height:2.5vh;width:2.5vh;border-radius:2.5vh;background:#00f;cursor:pointer;-webkit-appearance:none;margin-top:0}input[type=range].DarkBlueslider::-ms-thumb{border:0 solid #000;height:2.5vh;width:2.5vh;border-radius:2.5vh;background:#00f;cursor:pointer;-webkit-appearance:none;margin-top:0}input[type=range].DarkBlueslider::-webkit-slider-thumb{border:0 solid #000;height:2.5vh;width:2.5vh;border-radius:2.5vh;background:#00f;cursor:pointer;-webkit-appearance:none;margin-top:0}input[type=range].DarkBlueslider::-webkit-slider-runnable-track{width:100%;height:2.5vh;background:#add8e6;cursor:pointer;opacity:.7;border-radius:0;-webkit-appearance:none;border:0 solid #fff}input[type=range].DarkBlueslider::-ms-track{width:100%;height:2.5vh;background:#add8e6;cursor:pointer;opacity:.7;border-radius:0;-webkit-appearance:none;border:0 solid #fff}input[type=range].DarkBlueslider::-moz-range-track{width:100%;height:2.5vh;background:#add8e6;cursor:pointer;opacity:.7;border-radius:0;-webkit-appearance:none;border:0 solid #fff}input[type=range].DarkBlueslider:focus::-webkit-slider-runnable-track{width:50%;height:2.5vh;background:#add8e6;cursor:pointer;opacity:.7;border-radius:0;-webkit-appearance:none;border:0 solid #fff}input[type=range].DarkBlueslider:focus::-webkit-slider-runnable-track{width:50%;height:2.5vh;background:#add8e6;cursor:pointer;opacity:.7;border-radius:0;-webkit-appearance:none;border:0 solid #fff}input[type=range].DarkBlueslider:focus::-webkit-slider-runnable-track{width:50%;height:2.5vh;background:#add8e6;cursor:pointer;opacity:.7;border-radius:0;-webkit-appearance:none;border:0 solid #fff}input[type=range].DarkBlueslider:focus::-webkit-slider-runnable-track{width:50%;height:2.5vh;background:#add8e6;cursor:pointer;opacity:.7;border-radius:0;-webkit-appearance:none;border:0 solid #fff}
</style>

<script type="text/javascript">
var developer="Martin Kirby. waveaddapp@gmail.com",licence="copyright 2021 Martin Kirby. All rights reserved.",canvas1=document.getElementById("mainCanvas");ctx1=canvas1.getContext("2d");var canvasB=document.getElementById("backgroundCanvas");ctxB=canvasB.getContext("2d");var canvasequations=document.getElementById("equations");ctxEq=canvasequations.getContext("2d");var canvasinfo=document.getElementById("info");ctxInfo=canvasinfo.getContext("2d");var canvasvertdonate=document.getElementById("vertdonate");ctx2=canvasvertdonate.getContext("2d");var canvasgraph=document.getElementById("graph");ctxg=canvasgraph.getContext("2d");var radius=.7,mass=3,grav=10,gravreal=0,gravdrop=0,speed=0,initialspeed=0,iteration=0,ballradius=0,centriF=0,radialaccn=0,accn=0,weight=0,gravdropmultiplier=1.8,speeddropmultiplier=.028,ke=0,kebottom=0,pe=0,speedbottom=0,ypos=0,xpos=0,inithposForPara=0,initvposForPara=0,hposForPara=0,vposForPara=0,hposForParaLast=0,vposForParaLast=0,hposForParaChange=0,vposForParaChange=0,startframetime=0,endframetime=0,frametime=8.3,timingclick=1,thissceenwidth=screen.width,hposdelta=0,vposdelta=0,maxypos=0,dir=-1,radialw=0,tension=0,drawacircle=!0,hspeed=0,vspeed=0,hpos=0,initvpos=0,vpos=0,lasthpos=0,lastvpos=0,click=0,slacklength=0,speedhitcircle=0,KEhit=0,PEhit=0,TotalEnergyhit=0,intersect=!1,leavecircleposright=!1,hposlast=0,vposlast=0,hposlastdelta=0,vposlastdelta=0,totalfallheight=0,fallheight=0,pedrop=0,kedrop=0,totalenergydrop=0,pedropforcircle=0,hposmemory=0,vposmemory=0,clickmem=0,dropclick=0,vmem=0,hmem=0,iterationwhendropped=0,speedwhendropped=0,firstloopwithdrop=!1,startjustpressed=!1,ballheight=.25,CenterToTopOfRamp=0,LengthOfRamp=0,rampangle=0,RampInitHoriz=0,RampInitVert=0,rampaccn=0,rampspeed=0,rampdist=0,rampdistx=0,rampdisty=0,rampclick=0,ballleftramp=!1,ballreachedcircle=!1,ballisonramp=!1,flyofframp=!1,theballjustthismomentlefttheramp=!1,savedballheight=0,savedinitialspeed=0,savedgrav=0,savedmass=0,savedradius=0,saveddir=0,savediteration=0,dotheenergy=!1,dotheweight=!1,dothetension=!1,dothecentrif=!1,dotheradialaccn=!1,dothetangentaccn=!1,dothetotalaccn=!1,dothespeed=!1,dothetotalforce=!1,dothecomponents=!1,dofreeze=!1,dofreezetop=!1,dofreezebottom=!1,dofreezeside=!1,flyaway=!1,stop=!0,starthasbeenpressed=!1,slowmo=!1,thing=3,xs=0,ys=0,period=0,totaltime=0,swanglenow=0,swangle=0,gcount=0,lastposition=0,lastlastposition=0,lastspeed=0,lastlinspeed=0,lasta=0,writetangential=!0,ballisontrackforgraph=0,sumofperiods=0,circleperiod=0,circletime=0,completecircle=!1,oldcircletime=0,lastdir=0,lastmotionCorT=!0,drawenergraphs=!1,lastke=0,lastpe=0,lastlastpe=0,lastkedrop=0,lastpedrop=0,lastlastpedrop=0,lastkebottom=0,petemp=0,ketemp=0,passedbottom=!1,vsilly=0,passedbottomcount=0,passedtopcount=0,passedtopcount2=0,swingcount=0,gzero=!1,gnotzero=!0,stararray=[],showthesky=!0,x1=0,y1=0,x2=0,y2=0,h1=0,w1=0,weq=0,heq=0,winfo=0,hinfo=0,hvertdonate=0,wvertdonate=0,hg=0,wg=0,newx=0,newy=0,fontSize=0,fontBase=0,headlen=10,arrowtype=1,ddd=0,eee=0,fff=0,radiusslider=document.getElementById("radiusRange"),masslider=document.getElementById("massRange"),gslider=document.getElementById("gRange"),speedslider=document.getElementById("speedRange"),ballheightslider=document.getElementById("ballheightRange"),showF=!1,showC=!1,showL=!1,showTF=!1,showV=!1,showP=!1,showSP=!1,showTP=!1,showA=!1,showequations=!1,showinfo=!1,showvertdonate=!1,showgraph=!1,silly=0,timePID=0,swingtime=(swingcount=0,0),oldswingtime=0,animatetime=0,oldanimatetime=0,maxperiodtime=0,periodtime=0,theperiod=0,oldframetime=0,newframetime=0,timeforoneframe=0,perioddiffratio=0,bound=ctx1.canvas.getBoundingClientRect(),xMousePos=0,yMousePos=0,xgMousePos=0,ygMousePos=0,setBallPositionWithMouse=!1;for(let e=0;e<=401;e++)stararray[e]=Math.random();function showfor(){showF=!showF}function showcomps(){showC=!showC}function showlabs(){showL=!showL}function showtotf(){showTF=!showTF}function showvals(){showV=!showV}function freezepic(){showP=!showP}function showacceleration(){showA=!showA}function showinfobox(){document.getElementById("info").style.zIndex="+2",showinfo=!0}function showgraphbox(){document.getElementById("graph").style.zIndex="+2",showgraph=!0,gcount=0,document.getElementById("graphnowid").checked=!1}function getFont(){var e=fontSize/fontBase;if(.5*window.innerWidth>window.innerHeight)var t=.25*canvas1.width*e;if(window.innerHeight>=.5*window.innerWidth)t=canvas1.width*e;return(0|t)+"px sans-serif"}function getFont2(){var e=fontSize/fontBase;return(0|canvasgraph.width*e)+"px sans-serif"}function toDecimalPrecision(e,t){return(e=(+e).toPrecision(t)).indexOf("e")>=0&&(e=(+e).toString()),e}function htmltextchange(){document.getElementById("pradius").innerHTML=" Radius =  <span style='color:Crimson'>"+radius.toFixed(2)+" m </span>",document.getElementById("pmass").innerHTML=" Mass =  <span style='color:Crimson'>"+mass.toFixed(1)+" kg </span>",document.getElementById("pgravity").innerHTML=" g =  <span style='color:Crimson'>"+grav.toFixed(1)+" m/s²</span>",1==stop&&(document.getElementById("pspeed").innerHTML=" Initial speed =  <span style='color:Crimson'>"+initialspeed.toFixed(3)+" m/s</span>"),0==stop&&(document.getElementById("pspeed").innerHTML=" Speed at bottom of circle =  <span style='color:Crimson'>"+Math.abs(speedbottom).toFixed(3)+" m/s</span>"),document.getElementById("pballheight").innerHTML=" Initial ball height =  <span style='color:Crimson'>"+ballheight.toFixed(2)+" m</span>"}function dosymbollabel(e,t,a,o,i){fontBase=800,fontSize=10,ctx1.font=getFont(),ctx1.textAlign="right",ctx1.fillStyle=a,ctx1.fillText(e,o,i),fontBase=800,fontSize=8,ctx1.font=getFont(),ctx1.textAlign="left",ctx1.fillText(t,o,i)}function showperiod(){swanglenow=Math.acos((radius-((newy-vpos)/h1+radius))/radius),swangle=Math.acos((radius-Math.pow(speedbottom,2)/(2*grav))/radius),simpleperiod=2*Math.PI*Math.sqrt(radius/grav),period=2*Math.PI*Math.sqrt(radius/grav)+2*Math.PI*Math.sqrt(radius/grav)*Math.pow(swangle,2)/16+2*Math.PI*Math.sqrt(radius/grav)*11*Math.pow(swangle,4)/3072,perioddiffratio=period/simpleperiod,ctx1.textAlign="left",ctx1.fillStyle="black",ctx1.textAlign="left",fontBase=800,fontSize=9,ctx1.font=getFont(),0==swangle&&(period=0),(4==thing&&speedbottom<Math.sqrt(4*grav*radius)||thing<4&&speedbottom<Math.sqrt(5*grav*radius))&&((0==flyaway&&1==drawacircle&&speedbottom<=Math.sqrt(2*grav*radius)||4==thing)&&(ctx1.fillText("Swing angle = "+toDecimalPrecision(Math.abs(180*iteration/Math.PI),3)+" degrees ",.05*w1,.7*h1),thing<4&&(swingcount>=4&&(swingcount=0),swingcount>=0&&(ctx1.fillStyle="black"),swingcount>=2&&(ctx1.fillStyle="crimson"),ctx1.fillText("Period = "+period.toFixed(2)+" sec",.05*w1,.5*h1),ctx1.fillStyle="black",ctx1.fillText("Max. swing angle = "+toDecimalPrecision(180*swangle/Math.PI,3)+" degrees ",.05*w1,.6*h1)),4==thing&&(speedbottom<=Math.sqrt(4*grav*radius)&&(4==swingcount&&(swingcount=0),swingcount>=0&&(ctx1.fillStyle="black"),swingcount>=2&&(ctx1.fillStyle="crimson"),ctx1.fillText("Period = "+period.toFixed(2)+" sec",.05*w1,.5*h1),ctx1.fillStyle="black",ctx1.fillText("Max. swing angle = "+toDecimalPrecision(180*swangle/Math.PI,3)+" degrees ",.05*w1,.6*h1)),speedbottom>Math.sqrt(4*grav*radius)&&(ctx1.fillText("Period = ",.05*w1,.5*h1),ctx1.fillText("Max. swing angle = ",.05*w1,.6*h1)))),(0==drawacircle||speedbottom>Math.sqrt(2*grav*radius))&&(ctx1.fillText("Period = ",.05*w1,.5*h1),ctx1.fillText("Swing angle = ",.05*w1,.7*h1),ctx1.fillText("Max. swing angle = ",.05*w1,.6*h1)))}function dotheenergynow(){dotheenergy=1==document.getElementById("showenergy").checked}function dotheweightnow(){dotheweight=1==document.getElementById("showweight").checked}function dothetensionnow(){dothetension=1==document.getElementById("showtension").checked}function dothecentrifnow(){dothecentrif=1==document.getElementById("showcentrif").checked}function dothetotalaccnnow(){dothetotalaccn=1==document.getElementById("showtotalaccn").checked}function dothespeednow(){dothespeed=1==document.getElementById("showspeed").checked}function dothetotalforcenow(){dothetotalforce=1==document.getElementById("showtotalforce").checked}function dothetotalcomponentsnow(){dothecomponents=1==document.getElementById("showcomps").checked}function dotheflyaway(){flyaway=!0}function freeze(){dofreeze=!dofreeze,1==dofreezetop&&(document.getElementById("freezetopid").checked=!1),1==dofreezebottom&&(document.getElementById("freezebottomid").checked=!1),1==dofreezeside&&(document.getElementById("freezesideid").checked=!1),dofreezetop=!1,dofreezebottom=!1,dofreezeside=!1}function freezetop(){dofreezetop=1==document.getElementById("freezetopid").checked,1==dofreeze&&(document.getElementById("freezenowid").checked=!1),1==dofreezebottom&&(document.getElementById("freezebottomid").checked=!1),1==dofreezeside&&(document.getElementById("freezesideid").checked=!1),dofreeze=!1,dofreezebottom=!1,dofreezeside=!1}function freezeside(){1==dofreeze&&(document.getElementById("freezenowid").checked=!1),1==dofreezebottom&&(document.getElementById("freezebottomid").checked=!1),1==dofreezetop&&(document.getElementById("freezetopid").checked=!1),dofreeze=!1,dofreezebottom=!1,dofreezetop=!1,1==document.getElementById("freezesideid").checked&&(dofreezeside=!0),0==document.getElementById("freezesideid").checked&&(dofreezeside=!1)}function freezebottom(){dofreezebottom=1==document.getElementById("freezebottomid").checked,1==dofreeze&&(document.getElementById("freezenowid").checked=!1),1==dofreezeside&&(document.getElementById("freezesideid").checked=!1),1==dofreezetop&&(document.getElementById("freezetopid").checked=!1),dofreeze=!1,dofreezetop=!1,dofreezeside=!1}function drawArrow(e,t,a,o,i,s,r){ctx1.setLineDash([]),headlen=.02*w1;var n=Math.sqrt(Math.pow(t-o,2)+Math.pow(a-i,2));n<=headlen&&(headlen=n,s=.2*n);var l=Math.atan2(i-a,o-t);e.save(),e.strokeStyle=r,e.fillStyle=r,e.beginPath(),e.moveTo(t,a),e.lineTo(o,i),e.lineWidth=s,e.stroke(),e.beginPath(),e.moveTo(o,i),e.lineTo(o-headlen*Math.cos(l-Math.PI/7),i-headlen*Math.sin(l-Math.PI/7)),e.lineTo(o-headlen*Math.cos(l+Math.PI/7),i-headlen*Math.sin(l+Math.PI/7)),e.lineTo(o,i),e.lineTo(o-headlen*Math.cos(l-Math.PI/7),i-headlen*Math.sin(l-Math.PI/7)),e.stroke(),e.fill(),e.restore()}function drawrampweightlabels(){grav>0&&(x1=(RampInitHoriz+rampdistx)*h1,y1=newy+radius*h1-(RampInitVert+rampdisty)*h1,x2=(RampInitHoriz+rampdistx)*h1,y2=newy+radius*h1-(RampInitVert+rampdisty)*h1+weight*h1*.01,drawArrow(ctx1,x1,y1,x2,y2,4,"red"),xs=(RampInitHoriz+rampdistx-.02)*h1,ys=newy+radius*h1-(RampInitVert+rampdisty)*h1+weight*h1*.01+.04*h1,ddd=toDecimalPrecision(weight,3),0==showV&&dosymbollabel("F","gravity","red",xs,ys),1==showV&&dosymbollabel("F","gravity = "+ddd+" N","red",xs,ys))}function drawrampweightxcomponentlabels(){if(grav>0&&(1==dothecomponents||1==dothetotalforce)){var e=Math.PI/2-rampangle;x1=(RampInitHoriz+rampdistx)*h1,y1=newy+radius*h1-(RampInitVert+rampdisty)*h1,x2=(RampInitHoriz+rampdistx+.01*weight*Math.cos(e)*Math.sin(e))*h1,y2=newy+radius*h1-(RampInitVert+rampdisty)*h1+.01*weight*Math.sin(e)*Math.sin(e)*h1,0==dothetotalforce&&drawArrow(ctx1,x1,y1,x2,y2,1,"green"),1==dothetotalforce&&drawArrow(ctx1,x1,y1,x2,y2,4,"red"),xs=(RampInitHoriz+rampdistx+.01*weight*Math.cos(e)*Math.sin(e)+.04)*h1,ys=newy+radius*h1-(RampInitVert+rampdisty)*h1+.01*weight*Math.sin(e)*Math.sin(e)*h1+.04*h1,ddd=toDecimalPrecision(weight*Math.sin(e),3),1==dothecomponents&&(0==showV&&dosymbollabel("F","g x","green",xs,ys),1==showV&&dosymbollabel("F","g x = "+ddd+" N","green",xs,ys)),1==dothetotalforce&&(0==showV&&dosymbollabel("total F = F","g x","red",xs,ys),1==showV&&dosymbollabel("total F = F","g x = "+ddd+" N","red",xs,ys))}}function drawrampweightycomponentlabels(){if(grav>0&&1==dothecomponents){var e=Math.PI/2-rampangle;x1=(RampInitHoriz+rampdistx)*h1,y1=newy+radius*h1-(RampInitVert+rampdisty)*h1,x2=(RampInitHoriz+rampdistx-.01*weight*Math.cos(e)*Math.sin(e))*h1,y2=newy+radius*h1-(RampInitVert+rampdisty)*h1+.01*weight*Math.cos(e)*Math.cos(e)*h1,drawArrow(ctx1,x1,y1,x2,y2,1,"green"),xs=(RampInitHoriz+rampdistx-.01*weight*Math.cos(e)*Math.sin(e)-.04)*h1,ys=newy+radius*h1-(RampInitVert+rampdisty)*h1+.01*weight*Math.cos(e)*Math.cos(e)*h1+.04*h1,ddd=toDecimalPrecision(weight*Math.cos(e),3),0==showV&&dosymbollabel("F","g y","green",xs,ys),1==showV&&dosymbollabel("F","g y = "+ddd+" N","green",xs,ys),ctx1.lineWidth=1,ctx1.setLineDash([10,5]),ctx1.beginPath(),ctx1.moveTo((RampInitHoriz+rampdistx-.01*weight*Math.cos(e)*Math.sin(e))*h1,newy+radius*h1-(RampInitVert+rampdisty)*h1+.01*weight*Math.cos(e)*Math.cos(e)*h1),ctx1.lineTo((RampInitHoriz+rampdistx)*h1,newy+radius*h1-(RampInitVert+rampdisty)*h1+weight*h1*.01),ctx1.lineTo((RampInitHoriz+rampdistx+.01*weight*Math.cos(e)*Math.sin(e))*h1,newy+radius*h1-(RampInitVert+rampdisty)*h1+.01*weight*Math.sin(e)*Math.sin(e)*h1),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([])}}function drawrampnormallabels(){if(grav>0){var e=Math.PI/2-rampangle;x1=(RampInitHoriz+rampdistx)*h1,y1=newy+radius*h1-(RampInitVert+rampdisty)*h1,x2=(RampInitHoriz+rampdistx+.01*weight*Math.cos(e)*Math.sin(e))*h1,y2=newy+radius*h1-(RampInitVert+rampdisty)*h1-.01*weight*Math.cos(e)*Math.cos(e)*h1,drawArrow(ctx1,x1,y1,x2,y2,4,"red"),xs=(RampInitHoriz+rampdistx+.01*weight*Math.cos(e)*Math.sin(e)-.02)*h1,ys=newy+radius*h1-(RampInitVert+rampdisty)*h1-.01*weight*Math.cos(e)*Math.cos(e)*h1-.04*h1,ddd=toDecimalPrecision(weight*Math.cos(e),3),0==showV&&dosymbollabel("F"," normal","red",xs,ys),1==showV&&dosymbollabel("F"," normal = "+ddd+" N","red",xs,ys)}}function drawrampaccnlabels(){if(grav>0){var e=Math.PI/2-rampangle;x1=(RampInitHoriz+rampdistx)*h1,y1=newy+radius*h1-(RampInitVert+rampdisty)*h1,x2=(RampInitHoriz+rampdistx+.015*grav*Math.cos(e)*Math.sin(e))*h1,y2=newy+radius*h1-(RampInitVert+rampdisty)*h1+.015*grav*Math.sin(e)*Math.sin(e)*h1,drawArrow(ctx1,x1,y1,x2,y2,4,"darkorchid"),xs=(RampInitHoriz+rampdistx+.015*grav*Math.cos(e)*Math.sin(e)+.04)*h1,ys=newy+radius*h1-(RampInitVert+rampdisty)*h1+.015*grav*Math.sin(e)*Math.sin(e)*h1+.015*grav*Math.sin(e)*Math.sin(e)*h1+.04*h1,ddd=toDecimalPrecision(grav*Math.sin(e),3),0==showV&&dosymbollabel("a","","darkorchid",xs,ys),1==showV&&dosymbollabel("a"," = "+ddd+" m/s²","darkorchid",xs,ys)}}function drawparabolaweightlabels(){grav>0&&1==ballleftramp&&(x1=hpos,y1=vpos,x2=hpos,y2=vpos+weight*h1*.01,drawArrow(ctx1,x1,y1,x2,y2,4,"red"),xs=hpos,ys=vpos+weight*h1*.01+.04*h1,ddd=toDecimalPrecision(weight,3),0==showV&&0==dothetotalforce&&dosymbollabel("F","gravity","red",xs,ys),1==showV&&0==dothetotalforce&&dosymbollabel("F","gravity = "+ddd+" N","red",xs,ys),0==showV&&1==dothetotalforce&&dosymbollabel("total force: F","gravity","red",xs,ys),1==showV&&1==dothetotalforce&&dosymbollabel("total force: F","gravity = "+ddd+" N","red",xs,ys))}function drawparabolaaccnlabels(){grav>0&&1==ballleftramp&&(x1=hpos,y1=vpos,x2=hpos,y2=vpos+grav*h1*.0225,drawArrow(ctx1,x1,y1,x2,y2,4,"darkorchid"),xs=hpos,ys=vpos+grav*h1*.0225+.04*h1,ddd=toDecimalPrecision(grav,3),0==showV&&dosymbollabel("a gravity","","darkorchid",xs,ys),1==showV&&dosymbollabel("a gravity"," = "+ddd+" m/s²","darkorchid",xs,ys))}function drawparabolaspeedlabels(){if(Math.abs(speed)>0&&1==ballleftramp&&0==stop){0==dofreeze&&0==dofreezetop&&0==dofreezebottom&&0==dofreezeside&&(vposmemory=vposlast,hposmemory=hposlast),1!=dofreeze&&1!=dofreezetop&&1!=dofreezebottom&&1!=dofreezeside||(vposlast=vposmemory,hposlast=hposmemory),x1=hpos,y1=vpos;var e=Math.atan((hposlast-hpos)/(vposlast-vpos));vpos>=vposlast&&(x2=hpos+Math.sin(e)*Math.abs(Math.sqrt(2*kedrop/mass))*45,y2=vpos+Math.cos(e)*Math.abs(Math.sqrt(2*kedrop/mass))*45),vpos<vposlast&&(x2=hpos-Math.sin(e)*Math.abs(Math.sqrt(2*kedrop/mass))*45,y2=vpos-Math.cos(e)*Math.abs(Math.sqrt(2*kedrop/mass))*45),grav>0&&drawArrow(ctx1,x1,y1,x2,y2,3,"#36b1dc"),0==grav&&drawArrow(ctx1,x1,y1,x2,y2,3,"#c94e23"),vpos>=vposlast&&(xs=hpos+45*(Math.sin(e)*Math.abs(Math.sqrt(2*kedrop/mass))+.4),ys=vpos+45*(Math.cos(e)*Math.abs(Math.sqrt(2*kedrop/mass))+.4)),vpos<vposlast&&(xs=hpos-45*(Math.sin(e)*Math.abs(Math.sqrt(2*kedrop/mass))-.4),ys=vpos-45*(Math.cos(e)*Math.abs(Math.sqrt(2*kedrop/mass))-.4)),ddd=Math.abs(Math.sqrt(2*kedrop/mass)).toFixed(3),0==showV&&dosymbollabel("v","","#36b1dc",xs,ys),1==showV&&dosymbollabel("v = ",ddd+" m/s","#36b1dc",xs,ys),grav>0&&(0==showV&&dosymbollabel("v","","#36b1dc",xs,ys),1==showV&&dosymbollabel("v = ",ddd+" m/s","#36b1dc",xs,ys)),0==grav&&(0==showV&&dosymbollabel("v","","#c94e23",xs,ys),1==showV&&dosymbollabel("v = ",ddd+" m/s","#c94e23",xs,ys))}}function drawweightlabels(){ctx1.setLineDash([]),grav>0&&1==ballleftramp&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+radius*w1*Math.sin(iteration),y2=newy+(radius*h1*Math.cos(iteration)+weight*h1*.01),drawArrow(ctx1,x1,y1,x2,y2,4,"red"),xs=newx+radius*w1*Math.sin(iteration),ys=newy+(radius*h1*Math.cos(iteration)+weight*h1*.01+.04*h1),ddd=toDecimalPrecision(weight,3),0==showV&&dosymbollabel("F","gravity","red",xs,ys),1==showV&&dosymbollabel("F","gravity = "+ddd+" N","red",xs,ys),1==dothecomponents&&1==document.getElementById("showweight").checked&&(Math.abs(iteration)!=Math.PI/2&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+radius*w1*Math.sin(iteration)+weight*w1*.01*Math.sin(iteration)*Math.cos(iteration),y2=newy+radius*h1*Math.cos(iteration)+Math.abs(weight*h1*.01*Math.cos(iteration)*Math.cos(iteration)),drawArrow(ctx1,x1,y1,x2,y2,2,"green"),xs=newx+radius*w1*Math.sin(iteration)+(weight+5)*w1*.01*Math.sin(iteration)*Math.cos(iteration),ys=newy+radius*h1*Math.cos(iteration)+Math.abs((weight+5)*h1*.01*Math.cos(iteration)*Math.cos(iteration)),ddd=toDecimalPrecision(weight*Math.abs(Math.cos(iteration)),3),0==showV&&dosymbollabel("F","g radial","green",xs,ys),1==showV&&dosymbollabel("F","g radial = "+ddd+" N","green",xs,ys)),0!=Math.abs(iteration)&&Math.abs(iteration)!=Math.PI&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+(radius*w1*Math.sin(iteration)-weight*h1*.01*Math.sin(iteration)*Math.cos(iteration)),y2=newy+(radius*h1*Math.cos(iteration)+Math.abs(weight*h1*.01*Math.sin(iteration)*Math.sin(iteration))),drawArrow(ctx1,x1,y1,x2,y2,2,"green"),xs=newx+(radius*w1*Math.sin(iteration)-(weight+5)*h1*.01*Math.sin(iteration)*Math.cos(iteration)),ys=newy+(radius*h1*Math.cos(iteration)+Math.abs((weight+5)*h1*.01*Math.sin(iteration)*Math.sin(iteration))),ddd=toDecimalPrecision(Math.abs(weight*Math.sin(iteration)),3),0==showV&&dosymbollabel("F","g tangential","green",xs,ys),1==showV&&dosymbollabel("F","g tangential = "+ddd+" N","green",xs,ys)),ctx1.beginPath(),ctx1.lineWidth=1.5,ctx1.strokeStyle="green",ctx1.setLineDash([10,5]),ctx1.moveTo(newx+radius*w1*Math.sin(iteration)+weight*w1*.01*Math.sin(iteration)*Math.cos(iteration),newy+radius*h1*Math.cos(iteration)+Math.abs(weight*h1*.01*Math.cos(iteration)*Math.cos(iteration))),ctx1.lineTo(newx+radius*w1*Math.sin(iteration),newy+(radius*h1*Math.cos(iteration)+weight*h1*.01)),ctx1.lineTo(newx+(radius*w1*Math.sin(iteration)-weight*h1*.01*Math.sin(iteration)*Math.cos(iteration)),newy+(radius*h1*Math.cos(iteration)+Math.abs(weight*h1*.01*Math.sin(iteration)*Math.sin(iteration)))),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),ctx1.strokeStyle="gray"))}function drawradialaccnlabels(){Math.abs(speed)>0&&grav>0&&1==dothecomponents&&1==ballleftramp&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+radius*w1*Math.sin(iteration)-centriF/mass*w1*.015*Math.sin(iteration),y2=newy+radius*h1*Math.cos(iteration)-centriF/mass*h1*.015*Math.cos(iteration),drawArrow(ctx1,x1,y1,x2,y2,2,"darkorchid"),xs=newx+radius*w1*Math.sin(iteration)-(centriF/mass+2)*w1*.015*Math.sin(iteration),ys=newy+radius*h1*Math.cos(iteration)-(centriF/mass+2)*h1*.015*Math.cos(iteration),ddd=toDecimalPrecision(centriF/mass,3),0==showV&&dosymbollabel("a radial","","darkorchid",xs,ys),1==showV&&dosymbollabel("a radial"," = "+ddd+" m/s²","darkorchid",xs,ys))}function drawtangentialaccnlabels(){grav>0&&Math.abs(speed)>0&&1==dothecomponents&&1==ballleftramp&&0!=Math.abs(iteration)&&Math.abs(iteration)!=Math.PI&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+(radius*w1*Math.sin(iteration)-weight/mass*h1*.015*Math.sin(iteration)*Math.cos(iteration)),y2=newy+(radius*h1*Math.cos(iteration)+Math.abs(weight/mass*h1*.015*Math.sin(iteration)*Math.sin(iteration))),drawArrow(ctx1,x1,y1,x2,y2,2,"darkorchid"),xs=newx+(radius*w1*Math.sin(iteration)-(weight/mass+2)*h1*.015*Math.sin(iteration)*Math.cos(iteration)),ys=newy+(radius*h1*Math.cos(iteration)+Math.abs((weight/mass+2)*h1*.015*Math.sin(iteration)*Math.sin(iteration))),ddd=toDecimalPrecision(grav*Math.sin(iteration),3),ctx1.textAlign="center",0==showV&&dosymbollabel("a tangential","","darkorchid",xs,ys),1==showV&&dosymbollabel("a tangential"," = "+ddd+" m/s²","darkorchid",xs,ys))}function drawspeedlabels(){(Math.abs(speed)>0&&1==ballleftramp||speed<=0&&initialspeed>0)&&(0==stop&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+(radius*w1*Math.sin(iteration)-speed*h1*.12*Math.cos(iteration)),y2=newy+(radius*h1*Math.cos(iteration)+speed*h1*.12*Math.sin(iteration)),grav>0?drawArrow(ctx1,x1,y1,x2,y2,4,"#36b1dc"):drawArrow(ctx1,x1,y1,x2,y2,3,"#c94e23"),xs=newx+(radius*w1*Math.sin(iteration)-(speed+.4*dir)*h1*.12*Math.cos(iteration)),ys=newy+(radius*h1*Math.cos(iteration)+(speed+.4*dir)*h1*.12*Math.sin(iteration)),ddd=toDecimalPrecision(Math.abs(speed),3),grav>0&&(0==showV&&dosymbollabel("v","","#36b1dc",xs,ys),1==showV&&dosymbollabel("v = ",ddd+" m/s","#36b1dc",xs,ys)),0==grav&&(0==showV&&dosymbollabel("v","","#c94e23",xs,ys),1==showV&&dosymbollabel("v = ",ddd+" m/s","#c94e23",xs,ys))),1==stop&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+(radius*w1*Math.sin(iteration)-initialspeed*h1*.12*Math.cos(iteration)),y2=newy+(radius*h1*Math.cos(iteration)+initialspeed*h1*.12*Math.sin(iteration)),grav>0?drawArrow(ctx1,x1,y1,x2,y2,4,"#36b1dc"):drawArrow(ctx1,x1,y1,x2,y2,3,"#c94e23"),xs=newx+(radius*w1*Math.sin(iteration)-(initialspeed+-.4*dir)*h1*.12*Math.cos(iteration)),ys=newy+(radius*h1*Math.cos(iteration)+(initialspeed+-.4*dir)*h1*.12*Math.sin(iteration)),ddd=toDecimalPrecision(Math.abs(speed),3),grav>0&&(0==showV&&dosymbollabel("v","","#36b1dc",xs,ys),1==showV&&dosymbollabel("v = ",ddd+" m/s","#36b1dc",xs,ys)),0==grav&&(0==showV&&dosymbollabel("v","","#c94e23",xs,ys),1==showV&&dosymbollabel("v = ",ddd+" m/s","#c94e23",xs,ys))))}function drawtotalaccnlabels(){1==ballleftramp&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+radius*w1*Math.sin(iteration)-tension/mass*w1*.015*Math.sin(iteration),y2=newy+radius*h1*Math.cos(iteration)+grav*w1*.015-tension/mass*h1*.015*Math.cos(iteration),drawArrow(ctx1,x1,y1,x2,y2,6,"darkorchid"),xs=newx+radius*w1*Math.sin(iteration)-(tension/mass+2)*w1*.015*Math.sin(iteration),ys=newy+radius*h1*Math.cos(iteration)+grav*w1*.015-(tension/mass+2)*h1*.015*Math.cos(iteration),ddd=toDecimalPrecision(Math.sqrt(tension*tension+mass*grav*mass*grav+tension*mass*grav*Math.cos(iteration))/mass,3),0==showV&&dosymbollabel("total a","","darkorchid",xs,ys),1==showV&&dosymbollabel("total a = ",ddd+" m/s²","darkorchid",xs,ys),1==dothecomponents&&(ctx1.lineWidth=1.5,ctx1.setLineDash([10,5]),ctx1.strokeStyle="darkorchid",ctx1.moveTo(newx+radius*w1*Math.sin(iteration)-centriF/mass*w1*.015*Math.sin(iteration),newy+radius*h1*Math.cos(iteration)-centriF/mass*h1*.015*Math.cos(iteration)),ctx1.lineTo(newx+radius*w1*Math.sin(iteration)-tension/mass*w1*.015*Math.sin(iteration),newy+radius*h1*Math.cos(iteration)+grav*w1*.015-tension/mass*h1*.015*Math.cos(iteration)),ctx1.lineTo(newx+(radius*w1*Math.sin(iteration)-weight/mass*h1*.015*Math.sin(iteration)*Math.cos(iteration)),newy+(radius*h1*Math.cos(iteration)+Math.abs(weight/mass*h1*.015*Math.sin(iteration)*Math.sin(iteration)))),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),ctx1.strokeStyle="gray"))}function drawtensionlabels(){1==ballleftramp&&(ctx1.setLineDash([]),thing<3&&(x1=newx+(radius+ballradius)*w1*Math.sin(iteration),y1=newy+(radius+ballradius)*h1*Math.cos(iteration),x2=newx+(radius+ballradius)*w1*Math.sin(iteration)-tension*w1*.01*Math.sin(iteration),y2=newy+(radius+ballradius)*h1*Math.cos(iteration)-tension*h1*.01*Math.cos(iteration)),thing>2&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+radius*w1*Math.sin(iteration)-tension*w1*.01*Math.sin(iteration),y2=newy+radius*h1*Math.cos(iteration)-tension*h1*.01*Math.cos(iteration)),drawArrow(ctx1,x1,y1,x2,y2,4,"red"),xs=newx+radius*w1*Math.sin(iteration)-(tension+5)*w1*.01*Math.sin(iteration),ys=newy+radius*h1*Math.cos(iteration)-(tension+5)*h1*.01*Math.cos(iteration),ddd=toDecimalPrecision(tension,3),3==thing&&(0==showV&&dosymbollabel("F ","tension","red",xs,ys),1==showV&&dosymbollabel("F ","tension = "+ddd+" N","red",xs,ys)),thing<3&&(0==showV&&dosymbollabel("F ","normal","red",xs,ys),1==showV&&dosymbollabel("F ","normal = "+ddd+" N","red",xs,ys)),4==thing&&(tension>=0&&(0==showV&&dosymbollabel("F ","tension","red",xs,ys),1==showV&&dosymbollabel("F ","tension = "+ddd+" N","red",xs,ys)),tension<0&&(0==showV&&dosymbollabel("F ","normal","red",xs,ys),1==showV&&dosymbollabel("F ","normal = "+Math.abs(ddd)+" N","red",xs,ys))))}function drawcentripetalforcelabels(){Math.abs(speed)>0&&1==ballleftramp&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+radius*w1*Math.sin(iteration)-centriF*w1*.01*Math.sin(iteration),y2=newy+radius*h1*Math.cos(iteration)-centriF*h1*.01*Math.cos(iteration),drawArrow(ctx1,x1,y1,x2,y2,7,"blue"),xs=newx+radius*w1*Math.sin(iteration)-(centriF+5)*w1*.01*Math.sin(iteration),ys=newy+radius*h1*Math.cos(iteration)-(centriF+5)*h1*.01*Math.cos(iteration),ddd=toDecimalPrecision(centriF,3),0==showV&&dosymbollabel("F ","centripetal","blue",xs,ys),1==showV&&dosymbollabel("F ","centripetal = "+ddd+" N","blue",xs,ys))}function drawtotalforcelabels(){1==ballleftramp&&(x1=newx+radius*w1*Math.sin(iteration),y1=newy+radius*h1*Math.cos(iteration),x2=newx+radius*w1*Math.sin(iteration)-tension*w1*.01*Math.sin(iteration),y2=newy+radius*h1*Math.cos(iteration)+weight*w1*.01-tension*h1*.01*Math.cos(iteration),drawArrow(ctx1,x1,y1,x2,y2,6,"red"),xs=newx+radius*w1*Math.sin(iteration)-(tension+5)*w1*.01*Math.sin(iteration),ys=newy+radius*h1*Math.cos(iteration)+(weight-tension*Math.cos(iteration)-5*Math.cos(iteration))*w1*.01,ddd=toDecimalPrecision(mass*Math.sqrt(grav*grav*Math.sin(iteration)*Math.sin(iteration)+speed*speed*speed*speed/(radius*radius)),3),ddd=toDecimalPrecision(Math.sqrt(tension*tension+mass*grav*mass*grav+tension*mass*grav*Math.cos(iteration)),3),0==showV&&dosymbollabel("total ","Force","red",xs,ys),1==showV&&dosymbollabel("total ","Force = "+ddd+" N","red",xs,ys),1==dothecomponents&&(drawweightlabels(),drawtensionlabels(),ctx1.beginPath(),ctx1.lineWidth=1.5,ctx1.setLineDash([10,5]),ctx1.strokeStyle="orange",ctx1.moveTo(newx+radius*w1*Math.sin(iteration)-tension*w1*.01*Math.sin(iteration),newy+radius*h1*Math.cos(iteration)-tension*h1*.01*Math.cos(iteration)),ctx1.lineTo(newx+radius*w1*Math.sin(iteration)-tension*w1*.01*Math.sin(iteration),newy+radius*h1*Math.cos(iteration)+weight*w1*.01-tension*h1*.01*Math.cos(iteration)),ctx1.lineTo(newx+radius*w1*Math.sin(iteration),newy+(radius*h1*Math.cos(iteration)+weight*h1*.01)),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),ctx1.strokeStyle="gray"))}function drawradialforces(){if(1==dothecentrif&&1==ballleftramp){var e=newx,t=.12*h1;ctx1.lineWidth=20,ctx1.strokeStyle="white",ctx1.beginPath(),ctx1.moveTo(e,t-.04*h1),ctx1.lineTo(e,t+.16*h1),ctx1.stroke(),ctx1.closePath(),ctx1.strokeStyle="black",1==drawacircle&&(1==thing&&1==ballleftramp||thing>1)&&(x1=e,y1=t,x2=e+tension*w1*.01,y2=t,Math.abs(tension)>.005&&drawArrow(ctx1,x1,y1,x2,y2,4,"red"),x1=e,y1=t+.06*h1,x2=e-weight*(Math.cos(iteration)*w1*.01),y2=t+.06*h1,Math.abs(weight*Math.cos(iteration))>.005&&drawArrow(ctx1,x1,y1,x2,y2,4,"green"),x1=e,y1=t+.12*h1,x2=e+centriF*w1*.01,y2=t+.12*h1,drawArrow(ctx1,x1,y1,x2,y2,4,"blue"),fontBase=800,fontSize=9,ctx1.font=getFont(),1==showV&&(ctx1.textAlign="right",ctx1.fillStyle="maroon",ctx1.fillText(toDecimalPrecision(tension,3)+" N",e+.7*w1,t),ctx1.fillStyle="DarkOliveGreen",ctx1.fillText(toDecimalPrecision(-weight*Math.cos(iteration),3)+" N",e+.7*w1,t+.06*h1),ctx1.fillStyle="navy",ctx1.fillText(toDecimalPrecision(centriF,3)+" N",e+.7*w1,t+.12*h1))),ctx1.textBaseline="middle",ctx1.textAlign="center",ctx1.fillStyle="black",ctx1.fillText("+",e,t+.025*h1),ctx1.fillText("=",e,t+.09*h1),fontBase=800,fontSize=9,ctx1.font=getFont(),ctx1.textAlign="left",ctx1.fillStyle="maroon",thing<4&&ctx1.fillText("Tension",e+.2*w1,t),4==thing&&tension>=0&&ctx1.fillText("Tension",e+.2*w1,t),4==thing&&tension<0&&ctx1.fillText("Normal force",e+.2*w1,t),ctx1.fillStyle="DarkOliveGreen",ctx1.fillText("Fg radial",e+.2*w1,t+.06*h1),ctx1.fillStyle="navy",ctx1.fillText("Centripetal force",e+.2*w1,t+.12*h1)}}function drawenergybars(e,t,a){ctx1.fillStyle="black",ctx1.strokeStyle="gray",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.rect(1.8*w1,1.5*h1-a*h1*.02,.04*w1,a*h1*.02),ctx1.stroke(),ctx1.beginPath(),ctx1.fillRect(1.8*w1,1.5*h1-.02*t*h1,.04*w1,.02*t*h1),ctx1.fill(),ctx1.beginPath(),ctx1.rect(1.88*w1,1.5*h1-a*h1*.02,.04*w1,a*h1*.02),ctx1.stroke(),ctx1.beginPath(),ctx1.fillRect(1.88*w1,1.5*h1-.02*e*h1,.04*w1,.02*e*h1),ctx1.fill(),ctx1.beginPath(),ctx1.rect(1.96*w1,1.5*h1-a*h1*.02,.04*w1,a*h1*.02),ctx1.stroke(),ctx1.beginPath(),ctx1.fillRect(1.96*w1,1.5*h1-.02*a*h1,.04*w1,.02*a*h1),ctx1.fill(),fontBase=800,fontSize=8,ctx1.font=getFont(),ctx1.textAlign="center",ctx1.fillText("KE",1.82*w1,1.54*h1),fontBase=800,fontSize=8,ctx1.font=getFont(),ctx1.textAlign="center",ctx1.fillText("PE",1.9*w1,1.54*h1),fontBase=800,fontSize=8,ctx1.font=getFont(),ctx1.textAlign="center",ctx1.fillText("∑E",1.98*w1,1.54*h1),1==showV&&(ctx1.fillStyle="black",ctx1.textAlign="left",ctx1.fillText("KE = "+ke.toFixed(3)+" J",1.77*w1,1.64*h1),ctx1.fillText("PE = "+pe.toFixed(3)+" J",1.77*w1,1.7*h1),ctx1.fillText("∑E = "+(ke+pe).toFixed(3)+" J",1.77*w1,1.76*h1))}function drawenergydropbars(e,t,a){ctx1.fillStyle="black",ctx1.strokeStyle="gray",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.rect(1.8*w1,1.5*h1-a*h1*.02,.04*w1,a*h1*.02),ctx1.stroke(),ctx1.beginPath(),ctx1.fillRect(1.8*w1,1.5*h1-.02*t*h1,.04*w1,.02*t*h1),ctx1.fill(),ctx1.beginPath(),ctx1.rect(1.88*w1,1.5*h1-a*h1*.02,.04*w1,a*h1*.02),ctx1.stroke(),ctx1.beginPath(),ctx1.fillRect(1.88*w1,1.5*h1-.02*e*h1,.04*w1,.02*e*h1),ctx1.fill(),ctx1.beginPath(),ctx1.rect(1.96*w1,1.5*h1-a*h1*.02,.04*w1,a*h1*.02),ctx1.stroke(),ctx1.beginPath(),ctx1.fillRect(1.96*w1,1.5*h1-.02*a*h1,.04*w1,.02*a*h1),ctx1.fill(),fontBase=800,fontSize=8,ctx1.font=getFont(),ctx1.textAlign="center",ctx1.fillText("KE",1.82*w1,1.54*h1),fontBase=800,fontSize=8,ctx1.font=getFont(),ctx1.textAlign="center",ctx1.fillText("PE",1.9*w1,1.54*h1),fontBase=800,fontSize=8,ctx1.font=getFont(),ctx1.textAlign="center",ctx1.fillText("∑E",1.98*w1,1.54*h1),1==showV&&(ctx1.fillStyle="black",ctx1.textAlign="left",ctx1.fillText("KE = "+t.toFixed(3)+" J",1.77*w1,1.64*h1),ctx1.fillText("PE = "+e.toFixed(3)+" J",1.77*w1,1.7*h1),ctx1.fillText("∑E = "+(t+e).toFixed(3)+" J",1.77*w1,1.76*h1))}function PID(){ctx1.textAlign="left",ctx1.fillText("period  = "+period,.4*w1,.64*h1),ctx1.fillText("iteration  = "+iteration,.4*w1,.68*h1),ctx1.fillText("lastposition  = "+lastposition,.4*w1,.72*h1),ctx1.fillText("completecircle  = "+completecircle,.4*w1,.76*h1),ctx1.fillText("silly = "+silly,.4*w1,.8*h1),ctx1.fillText("sumofperiods = "+sumofperiods,.4*w1,.84*h1),ctx1.fillText("circleperiod = "+circleperiod.toFixed(2),.4*w1,.88*h1),ctx1.fillText("passedbottom  = "+passedbottom,.4*w1,.92*h1),ctx1.fillText("dir  = "+dir,.4*w1,.96*h1)}function drawstars(e,t,a){ctxB.beginPath(),ctxB.ellipse(e,t,.009*w1*a,.009*h1*a,2*Math.PI,0,2*Math.PI),ctxB.stroke(),ctxB.fill(),ctxB.closePath()}function graphmouse(){gcount=0,drawenergraphs=!drawenergraphs,xgMousePos-w1-wg/2>.9*wg&&ygMousePos-.5*h1+.355*hg>.85*hg&&(showgraph=!1,document.getElementById("graph").style.zIndex="-3")}function getMousePos(e,t){e.getBoundingClientRect();return{x:t.clientX,y:t.clientY}}function getgMousePos(e,t){e.getBoundingClientRect();return{x:t.clientX,y:t.clientY}}function brian(){setBallPositionWithMouse=!1}function drawsky(){var e=ctxB.createLinearGradient(0,1.5*newy*(1-Math.cos(10*Math.PI/180)),0,1.5*newy*Math.cos(10*Math.PI/180));if(e.addColorStop(0,"#95E8FA"),e.addColorStop(1,"white"),ctxB.fillStyle=e,ctxB.fillRect(0,0,16*w1,2*h1),grav>0&&(ctxB.fillStyle="yellow",ctxB.beginPath(),ctxB.ellipse(.4*w1,.8*h1,.14*w1,.14*h1,2*Math.PI,0,2*Math.PI),ctxB.closePath(),ctxB.fill(),ctxB.fillStyle="white",ctxB.beginPath(),ctxB.ellipse(1.1*w1,.9*h1-2*Math.tan(10*Math.PI/180)*h1,.18*w1,.14*h1,2*Math.PI,0,2*Math.PI),ctxB.fill(),ctxB.ellipse(1.3*w1,.94*h1-2*Math.tan(10*Math.PI/180)*h1,.24*w1,.12*h1,2*Math.PI,0,2*Math.PI),ctxB.fill(),ctxB.ellipse(1.8*w1,.84*h1-2*Math.tan(10*Math.PI/180)*h1,.28*w1,.14*h1,2*Math.PI,0,2*Math.PI),ctxB.fill(),ctxB.ellipse(1.7*w1,.88*h1-2*Math.tan(10*Math.PI/180)*h1,.28*w1,.14*h1,2*Math.PI,0,2*Math.PI),ctxB.fill(),ctxB.closePath),0==grav){ctxB.fillStyle="black";for(let e=0;e<395;e++)X=stararray[e]*canvasB.width,Y=stararray[e+1]*canvasB.height,B=stararray[e+2],drawstars(2*X,Y,B),ctxB.textAlign="left",fontBase=800,fontSize=9,ctxB.font=getFont();ctxB.fillText("Deepest, darkest space",.1*w1,1.8*h1)}}function drawTheSim(){if(.5*window.innerWidth>window.innerHeight&&(ctx1.canvas.width=8*window.innerHeight,ctx1.canvas.height=2*window.innerHeight,w1=.0625*canvas1.width,h1=.25*canvas1.height),window.innerHeight>=.5*window.innerWidth&&(ctx1.canvas.width=1*window.innerWidth,ctx1.canvas.height=2*window.innerWidth,w1=.25*canvas1.width,h1=.125*canvas1.height),1==thing&&(newx=2*w1-radius*w1,newy=2*h1-(radius+.2)*h1),thing>1&&(newx=w1,newy=h1),ctx1.textAlign="center",ctx1.textBaseline="middle",fontBase=800,fontSize=13,ctx1.font=getFont(),0==slowmo&&(document.getElementById("slowButton").style.background="green"),1==slowmo&&(document.getElementById("slowButton").style.background="red"),1==stop&&(document.getElementById("startButton").style.background="green",document.getElementById("resetButton").style.background="gray",document.getElementById("pauseButton").style.background="gray"),passedbottom=!1,(lastposition>0&&iteration<0||lastposition<0&&iteration>0)&&(passedbottom=!0,completecircle=!1,passedbottomcount+=1),(lastposition>Math.PI&&iteration<Math.PI||lastposition<-Math.PI&&iteration>-Math.PI)&&(passedbottom=!0,completecircle=!0,circletime=performance.now(),0==slowmo&&(circleperiod=(circletime-oldcircletime)/1e3),1==slowmo&&(circleperiod=(circletime-oldcircletime)/1e4),oldcircletime=circletime,passedbottomcount+=2),lastposition=iteration,x1=newx,y1=newy,x2=newx+radius*h1,y2=newy,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),x1=newx+radius*h1,y1=newy,x2=newx,y2=newy,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),fontBase=800,fontSize=10,ctx1.font=getFont(),ctx1.textAlign="middle",ctx1.fillStyle="gray",0==showV&&ctx1.fillText("r",newx+radius/2*h1,newy+.02*h1),1==showV&&ctx1.fillText("r = "+radius+" m",newx+radius/2*h1,newy+.02*h1),ctx1.lineWidth=2,ctx1.beginPath(),ctx1.fillStyle="black",ctx1.setLineDash([2,5]),ctx1.ellipse(newx,newy,radius*w1,radius*h1,2*Math.PI,0,2*Math.PI),ctx1.stroke(),ctx1.setLineDash([]),fontBase=800,fontSize=9,ctx1.font=getFont(),ctx1.textAlign="right",ctx1.fillStyle="darkblue",ctx1.fillText("VerticalCircleSim",3.65*w1,.06*h1),1==showgraph&&(showgraphs(),lastspeed=speed,lasta=grav*h1*15e-5*Math.sin(iteration)),1==showthesky&&(drawsky(),showthesky=!1),1==showV&&0==flyaway&&(ctx1.textAlign="left",fontBase=800,fontSize=9,ctx1.font=getFont(),ctx1.fillStyle="black",ddd=toDecimalPrecision(Math.abs(radius*Math.cos(iteration)-radius),3),eee=toDecimalPrecision(Math.abs(speed),3),fff=Math.sqrt(2*grav*(ballheight-s)).toFixed(3),grav>0&&(1==stop&&(ctx1.fillText("Height = "+ballheight+" m",.05*w1,.2*h1),ctx1.fillText("Speed = "+document.getElementById("speedRange").value+" m/s",.05*w1,.1*h1)),1==drawacircle&&0==ballisonramp&&1==ballleftramp&&0==stop&&(ctx1.fillText("Height = "+ddd+" m",.05*w1,.2*h1),ctx1.fillText("Speed = "+eee+" m/s",.05*w1,.1*h1))),0==grav&&(1==stop&&(ctx1.fillText("No height, as g = zero",.05*w1,.2*h1),ctx1.fillText("Speed = "+document.getElementById("speedRange").value+" m/s",.05*w1,.1*h1)),1==drawacircle&&0==ballisonramp&&1==ballleftramp&&0==stop&&(ctx1.fillText("No height, as g = zero",.05*w1,.2*h1),ctx1.fillText("Speed = "+eee+" m/s",.05*w1,.1*h1))),0==dofreeze&&0==dofreezetop&&0==dofreezeside&&0==dofreezebottom&&(0==slowmo&&(totaltime+=frametime),1==slowmo&&(totaltime+=.1*frametime),1==stop&&(totaltime=0),ctx1.fillText("Time = "+toDecimalPrecision(-totaltime/200,3)+" secs",.05*w1,.3*h1)),1!=dofreeze&&1!=dofreezetop&&1!=dofreezeside&&1!=dofreezebottom||(1==stop&&(totaltime=0),ctx1.fillText("Time = "+toDecimalPrecision(-totaltime/200,3)+" secs",.05*w1,.3*h1))),0==stop&&(1==dofreeze&&(iteration=iteration),0==dofreeze&&(1==dofreezetop&&speedbottom>=Math.sqrt(5*grav*radius)?iteration=Math.PI:1==dofreezebottom?iteration=0:1==dofreezeside?iteration=Math.PI/2:(0==slowmo&&(iteration+=.005*speed*frametime/radius),1==slowmo&&0==flyaway&&(iteration+=5e-4*speed*frametime/radius)))),0==dotheweight&&0==dothetotalforce&&0==dothetotalaccn&&(document.getElementById("showcomps").disabled=!0),1!=dotheweight&&1!=dothetotalforce&&1!=dothetotalaccn||(document.getElementById("showcomps").disabled=!1),speedbottom<Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!0),speedbottom>=Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!1),thing>1&&ballheight>2*radius&&grav>0&&(ballheight=radius,kebottom=.5*mass*grav*radius,speedbottom=Math.sqrt(2*kebottom/mass),speed=0,lastvpos=newx,savedballheight=ballheight),speedbottom<Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!0),speedbottom>=Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!1),0==stop&&(document.getElementById("ballheightRange").disabled=!0),1==thing&&(newx=2*w1-radius*w1,newy=2*h1-(radius+.2)*h1),thing>1&&(newx=w1,newy=h1),ballradius=.04*Math.pow(mass,1/3),drawradialforces(),1==thing){document.getElementById("ballflyaway").disabled=!1,document.getElementById("speedRange").disabled=!1,htmltextchange(),ctx1.lineWidth=3,ctx1.beginPath(),0==flyaway&&ctx1.ellipse(newx,newy,(radius+ballradius)*w1,(radius+ballradius)*h1,2*Math.PI,0,2*Math.PI),ctx1.stroke(),ctx1.setLineDash([]),ctx1.closePath();var e=ballheight*h1,t=radius*h1,a=newx-.1*w1;CenterToTopOfRamp=Math.sqrt(a*a+(e-t)*(e-t)),LengthOfRamp=Math.sqrt(CenterToTopOfRamp*CenterToTopOfRamp-t*t);var o=Math.atan((e-t)/a),i=Math.asin(t/CenterToTopOfRamp);if(rampangle=Math.PI/2-o-i,0==flyaway&&(ctx1.beginPath(),ctx1.moveTo(.1*w1-ballradius*Math.cos(rampangle)*w1,newy+t-e+ballradius*Math.sin(rampangle)*h1),ctx1.lineTo(.1*w1+LengthOfRamp*Math.sin(rampangle)-ballradius*Math.cos(rampangle)*w1,newy+t-e+LengthOfRamp*Math.cos(rampangle)+ballradius*Math.sin(rampangle)*h1),ctx1.stroke(),ctx1.closePath()),ctx1.lineWidth=2,ctx1.beginPath(),ctx1.fillStyle="gray",ctx1.setLineDash([2,5]),ctx1.beginPath(),ctx1.moveTo(.1*w1,newy+t-e),ctx1.lineTo(.1*w1+LengthOfRamp*Math.sin(rampangle),newy+t-e+LengthOfRamp*Math.cos(rampangle)),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),RampInitHoriz=.1,RampInitVert=ballheight,ctx1.strokeStyle="gray",ctx1.lineWidth=1,ctx1.setLineDash([2,5]),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*h1-(ballheight+ballradius*Math.sin(rampangle))*h1+ballradius*Math.sin(rampangle)*h1),ctx1.lineTo(newx+radius*w1,newy+radius*h1-(ballheight+ballradius*Math.sin(rampangle))*h1+ballradius*Math.sin(rampangle)*h1),ctx1.stroke(),ctx1.closePath(),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*h1),ctx1.lineTo(newx+radius*w1,newy+radius*h1),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),x1=.2*w1,y1=newy+radius*h1-RampInitVert*h1,x2=.2*w1,y2=newy+radius*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),x1=.2*w1,y1=newy+radius*h1,x2=.2*w1,y2=newy+radius*h1-RampInitVert*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),fontBase=800,fontSize=10,ctx1.font=getFont(),ctx1.textAlign="left",ctx1.fillStyle="gray",ballheight>0&&0==showV&&0==ballreachedcircle&&ctx1.fillText("H",.22*w1,(newy+radius*h1+(newy+radius*h1-RampInitVert*h1))/2),ballheight>0&&1==showV&&0==ballreachedcircle&&ctx1.fillText("H = "+ballheight+" m",.22*w1,(newy+radius*h1+(newy+radius*h1-RampInitVert*h1))/2),ballheight>=2.5*radius&&(document.getElementById("freezetopid").disabled=!1),ballheight<2.5*radius&&(document.getElementById("freezetopid").disabled=!0),ballheight>=radius&&(document.getElementById("freezesideid").disabled=!1),ballheight<radius&&(document.getElementById("freezesideid").disabled=!0),1==stop&&(initialspeed=Number(speedslider.value).valueOf(),ballheight=Number(ballheightslider.value).valueOf(),radius=Number(radiusslider.value).valueOf(),document.getElementById("pspeed").innerHTML=" Initial speed at starting point =  <span style='color:Crimson'>"+initialspeed.toFixed(3)+" m/s</span>",drawacircle=!1,htmltextchange(),ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.ellipse(.1*w1,newy+t-e,ballradius*w1,ballradius*h1,2*Math.PI,0,2.5*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill(),speedbottom<Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!0),speedbottom>=Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!1),speedbottom<Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!0),speedbottom>=Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!1),weight=mass*grav,1==dotheweight&&drawrampweightlabels(),1!=dotheweight&&1!=dothetotalforce||drawrampweightxcomponentlabels(),1==dotheweight&&drawrampweightycomponentlabels(),1==dothetotalaccn&&drawrampaccnlabels(),1==dothetension&&drawrampnormallabels(),1==dothetotalforce&&1==dothecomponents&&(drawrampnormallabels(),drawrampweightlabels(),drawrampweightxcomponentlabels(),drawrampweightycomponentlabels()),dir=-1,kebottom=(pe=mass*grav*ballheight)+(ke=mass*grav*ballheight-pe+.5*mass*initialspeed*initialspeed),speedbottom=Math.sqrt(2*grav*ballheight+initialspeed*initialspeed),1==dotheenergy&&drawenergybars(pe,ke,kebottom),hposForParaLast=inithposForPara,vposForParaLast=initvposForPara,inithposForPara=newx+radius*w1*Math.sin(iteration),initvposForPara=newy+radius*h1*Math.cos(iteration),rampclick=0,rampdist=0),0==stop){if(rampdist*h1<LengthOfRamp){if(document.getElementById("speedRange").disabled=!0,ballisonramp=!0,ballleftramp=!1,rampaccn=Math.cos(rampangle)*grav,rampspeed=rampaccn*rampclick-initialspeed,rampdistx=(rampdist=-initialspeed*rampclick+.5*rampaccn*rampclick*rampclick)*Math.sin(rampangle),rampdisty=-rampdist*Math.cos(rampangle),0==dofreeze&&(0==stop&&0==slowmo&&(rampclick+=.005*frametime),0==stop&&1==slowmo&&(rampclick+=5e-4*frametime),1==stop&&(rampclick=rampclick)),1==flyaway&&(flyofframp=!0),ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.ellipse((RampInitHoriz+rampdistx)*h1,newy+t-(RampInitVert+rampdisty)*h1,ballradius*w1,ballradius*h1,2*Math.PI,0,2.5*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill(),1==showV){ctx1.fillStyle="black",ctx1.textAlign="left",fontBase=800,fontSize=9,ctx1.font=getFont();var s=toDecimalPrecision(ballheight-rampdist*Math.cos(rampangle),3);ctx1.fillText("Height = "+s+" m",.05*w1,.2*h1),ddd=toDecimalPrecision(Math.sqrt(2*grav*(ballheight-s)),3),ctx1.fillText("Speed = "+ddd+" m/s",.05*w1,.1*h1)}if(1==dothespeed){s=ballheight-rampdist*Math.cos(rampangle);x1=(RampInitHoriz+rampdistx)*h1,y1=newy+t-(RampInitVert+rampdisty)*h1,x2=(RampInitHoriz+rampdistx)*h1+.12*w1*Math.sqrt(2*grav*(ballheight-s))*Math.sin(rampangle),y2=newy+t-(RampInitVert+rampdisty)*h1+.12*h1*Math.sqrt(2*grav*(ballheight-s))*Math.cos(rampangle),drawArrow(ctx1,x1,y1,x2,y2,4,"#36b1dc"),xs=(RampInitHoriz+rampdistx)*h1+.12*w1*Math.sqrt(2*grav*(ballheight-s))*Math.sin(rampangle)+.06*w1*Math.sin(rampangle),ys=newy+t-(RampInitVert+rampdisty)*h1+.12*h1*Math.sqrt(2*grav*(ballheight-s))*Math.cos(rampangle)+.06*w1*Math.cos(rampangle),ddd=Math.sqrt(2*grav*(ballheight-s)).toFixed(3),0==showV&&dosymbollabel("v ","","#36b1dc",xs,ys),1==showV&&dosymbollabel("v ","= "+ddd+" m/s","#36b1dc",xs,ys)}weight=mass*grav,1==dotheweight&&drawrampweightlabels(),1!=dotheweight&&1!=dothetotalforce||drawrampweightxcomponentlabels(),1==dotheweight&&drawrampweightycomponentlabels(),1==dothetotalaccn&&drawrampaccnlabels(),1==dothetension&&rampangle>0&&drawrampnormallabels(),1==dothetotalforce&&1==dothecomponents&&(drawrampnormallabels(),drawrampweightlabels(),drawrampweightxcomponentlabels(),drawrampweightycomponentlabels()),kebottom=(pe=mass*grav*(ballheight+rampdisty))+(ke=mass*grav*ballheight-pe+.5*mass*initialspeed*initialspeed),1==dotheenergy&&drawenergybars(pe,ke,kebottom),speedbottom=Math.sqrt(2*grav*ballheight+initialspeed*initialspeed),htmltextchange(),document.getElementById("speedRange").value=speedbottom}else rampdist>.001&&0==ballleftramp&&(ballisonramp=!1,ballleftramp=!0,speedbottom=Math.sqrt(2*grav*ballheight+initialspeed*initialspeed),iteration=rampangle-Math.PI/2,dir=-1,theballjustthismomentlefttheramp=!0,drawacircle=!0);if(1==drawacircle&&1==ballleftramp&&0==ballisonramp&&1==theballjustthismomentlefttheramp&&(document.getElementById("speedRange").disabled=!1,document.getElementById("freezetopid").disabled=!1,document.getElementById("freezesideid").disabled=!1,document.getElementById("freezebottomid").disabled=!1,dropclick=0,iteration>=2*Math.PI&&(iteration=0),iteration<=2*-Math.PI&&(iteration=0),kebottom=.5*mass*speedbottom*speedbottom,0==speedbottom&&(kebottom=0),oldypos=ypos,ypos=radius-radius*Math.cos(iteration),(pe=mass*grav*ypos)>=kebottom&&ypos>=oldypos&&(dir*=-1,swingcount+=1),ke=kebottom-pe,speed=dir*Math.sqrt(Math.abs(2*ke/mass)),centriF=mass*speed*speed/radius,radialw=(weight=mass*grav)*Math.cos(iteration),tension=centriF+radialw,flyaway&&(tension=-3),document.getElementById("freezetopid").disabled=!1,document.getElementById("freezesideid").disabled=!1,document.getElementById("freezebottomid").disabled=!1,speedbottom<Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!0),speedbottom>=Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!1),speedbottom<Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!0),speedbottom>=Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!1),ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.ellipse(newx+radius*w1*Math.sin(iteration),newy+radius*h1*Math.cos(iteration),ballradius*w1,ballradius*h1,2*Math.PI,0,2*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill(),ctx1.strokeStyle="gray",ctx1.lineWidth=1,ctx1.setLineDash([2,5]),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*h1),ctx1.lineTo(newx+radius*w1,newy+radius*h1),ctx1.stroke(),ctx1.closePath(),ctx1.beginPath(),ctx1.moveTo(0,newy+(radius-savedballheight)*h1),ctx1.lineTo(newx+radius*w1,newy+(radius-savedballheight)*h1),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),x1=.2*w1,y1=newy+radius*h1,x2=.2*w1,y2=newy+(radius-savedballheight)*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),x1=.2*w1,y1=newy+(radius-savedballheight)*h1,x2=.2*w1,y2=newy+radius*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),fontBase=800,fontSize=10,ctx1.font=getFont(),ctx1.textAlign="midde",ctx1.fillStyle="gray",ballheight>0&&0==showV&&ctx1.fillText("H",.22*w1,(newy+radius*h1+(newy+radius*h1-RampInitVert*h1))/2),ballheight>0&&1==showV&&ctx1.fillText("H = "+ballheight+" m",.22*w1,(newy+radius*h1+(newy+radius*h1-RampInitVert*h1))/2),hposForParaLast=inithposForPara,vposForParaLast=initvposForPara,inithposForPara=newx+radius*w1*Math.sin(iteration),initvposForPara=newy+radius*h1*Math.cos(iteration),1==dothecentrif&&drawcentripetalforcelabels(),1==dotheenergy&&drawenergybars(pe,ke,kebottom),1==dothetension&&drawtensionlabels(),1==dotheweight&&drawweightlabels(),1==dothetotalforce&&0==dothecomponents&&drawtotalforcelabels(),1==dothetotalforce&&1==dothecomponents&&(drawtotalforcelabels(),drawtensionlabels(),drawweightlabels()),1==dothetotalforce&&drawtotalforcelabels(),1==dothetotalaccn&&0==dothecomponents&&drawtotalaccnlabels(),1==dothetotalaccn&&1==dothecomponents&&(drawtotalaccnlabels(),drawradialaccnlabels(),drawtangentialaccnlabels()),1==dothespeed&&drawspeedlabels(),1==showV&&showperiod(),tension<=0&&(hposForParaChange=inithposForPara-hposForParaLast,vposForParaChange=initvposForPara-vposForParaLast,click=0,inithposForPara>newx&&(leavecircleposright=!0),inithposForPara<=newx&&(leavecircleposright=!1),iterationwhendropped=iteration,speedwhendropped=Math.abs(speed),drawacircle=!1,hposlast=hpos,vposlast=vpos,hpos=inithposForPara+2.1*dir*speedwhendropped*Math.cos(iterationwhendropped)*click,vpos=initvposForPara+(-dir*gravdropmultiplier*speedwhendropped*Math.sin(iterationwhendropped)*click+speeddropmultiplier*gravdrop*click*click))),0==drawacircle){if(0==flyaway&&(gravdrop=.3*grav),1==flyaway&&(gravdrop=.153*grav),hposlast=hpos,vposlast=vpos,hpos=inithposForPara+2.1*dir*speedwhendropped*Math.cos(iterationwhendropped)*click,vpos=initvposForPara+(-dir*gravdropmultiplier*speedwhendropped*Math.sin(iterationwhendropped)*click+speeddropmultiplier*gravdrop*click*click),0==dofreeze&&0==slowmo&&(click+=frametime),0==dofreeze&&1==slowmo&&(click+=.1*frametime),Math.pow(hpos-newx,2)+Math.pow(vpos-newy,2)>=Math.pow(1.002*radius*h1,2)==1&&vposlast<=vpos&&(intersect=!0),Math.pow(hpos-newx,2)+Math.pow(vpos-newy,2)>=Math.pow(1.01*radius*h1,2)==1&&vposlast<=vpos&&(intersect=!0),1==flyaway&&(intersect=!1),1==intersect&&(hpos>=newx&&(dir=1),hpos<=newx&&(dir=-1),vpos<=newy&&(iteration=Math.PI+Math.atan((hpos-newx)/(vpos-newy))),vpos>newy&&(iteration=Math.atan((hpos-newx)/(vpos-newy))),vpos<=radius&&(kebottom=(kebottom-pedropforcircle)*Math.sin(Math.abs(iteration))),vpos>radius&&(kebottom-=pedropforcircle),speedbottom=.995*Math.sin(iteration)*Math.sqrt(2*grav*ypos+speed*speed),document.getElementById("freezetopid").disabled=!1,document.getElementById("freezesideid").disabled=!1,document.getElementById("freezebottomid").disabled=!1,speedbottom<Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!0),speedbottom>=Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!1),speedbottom<Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!0),speedbottom>=Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!1),drawacircle=!0,intersect=!1),0!=ballisonramp&&1!=ballleftramp||(ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.ellipse(hpos,vpos,ballradius*w1,ballradius*h1,2*Math.PI,0,2*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill()),totalenergydrop=(kedrop=.5*mass*speedwhendropped*speedwhendropped+mass*grav*(totalfallheight=(newy+radius*h1-initvposForPara)/h1)-(pedrop=mass*grav*(fallheight=(newy+radius*h1-vpos)/h1)))+pedrop,pedropforcircle=mass*grav*(totalfallheight-fallheight),1==dotheenergy&&1==ballleftramp&&drawenergydropbars(pedrop,kedrop,totalenergydrop),1!=dotheweight&&1!=dothetotalforce||drawparabolaweightlabels(),1==dothetotalaccn&&drawparabolaaccnlabels(),1==showV&&1==ballleftramp){var r=(newy-vpos)/h1+radius;ctx1.textAlign="left",fontBase=800,fontSize=9,ctx1.font=getFont(),ctx1.fillStyle="black",ctx1.fillText("Height = "+r.toFixed(3)+" m",.05*w1,.2*h1),ctx1.fillText("Speed = "+Math.abs(Math.sqrt(2*kedrop/mass)).toFixed(3)+" m/s",.05*w1,.1*h1)}1==dothespeed&&drawparabolaspeedlabels(),(hpos>5*w1||hpos<5*-w1||vpos>5*h1||vpos<5*-h1)&&(flyaway=!1,stop=!0,document.getElementById("ballflyaway").checked=!1,reset())}}}if((2==thing||3==thing)&&(document.getElementById("speedRange").disabled=!1,ballleftramp=!0,2==thing&&(ctx1.lineWidth=6,ctx1.beginPath(),0==flyaway&&ctx1.ellipse(newx,newy,(radius+ballradius)*w1+3,(radius+ballradius)*h1+3,2*Math.PI,0,2*Math.PI),ctx1.stroke(),ctx1.closePath()),ballheight>radius&&0==speedbottom&&(initialspeed=0),1==showV&&showperiod(),1==stop&&(ypos<radius&&(initialspeed=Number(speedslider.value).valueOf()),ypos>radius&&(initialspeed=0),(ballheight=Number(ballheightslider.value).valueOf())>2*radius&&grav>0&&(ballheight=2*radius,kebottom=.5*mass*grav*2*radius,speedbottom=Math.sqrt(2*kebottom/mass),speed=0,lastvpos=newx),radius=Number(radiusslider.value).valueOf(),htmltextchange(),iteration=Math.acos((radius-ballheight)/radius),kebottom=.5*mass*initialspeed*initialspeed+mass*grav*ballheight,speedbottom=Math.sqrt(2*kebottom/mass),document.getElementById("freezetopid").disabled=!1,document.getElementById("freezesideid").disabled=!1,document.getElementById("freezebottomid").disabled=!1,speedbottom<Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!0),speedbottom>=Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!1),speedbottom<Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!0),speedbottom>=Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!1),3==thing&&(ctx1.lineWidth=3,ctx1.beginPath(),ctx1.moveTo(newx,newy),ctx1.lineTo(newx+(radius-ballradius)*w1*Math.sin(iteration),newy+(radius-ballradius)*h1*Math.cos(iteration)),ctx1.stroke(),ctx1.lineWidth=1),ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.ellipse(newx+radius*w1*Math.sin(iteration),newy+radius*h1*Math.cos(iteration),ballradius*w1,ballradius*h1,2*Math.PI,0,2*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill(),ctx1.strokeStyle="gray",ctx1.lineWidth=1,ctx1.setLineDash([2,5]),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*h1),ctx1.lineTo(newx+radius*w1,newy+radius*h1),ctx1.stroke(),ctx1.closePath(),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*w1*Math.cos(iteration)),ctx1.lineTo(newx+radius*w1,newy+radius*w1*Math.cos(iteration)),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),x1=.2*w1,y1=newy+radius*h1,x2=.2*w1,y2=newy+radius*w1*Math.cos(iteration),drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),x1=.2*w1,y1=newy+radius*w1*Math.cos(iteration),x2=.2*w1,y2=newy+radius*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),fontBase=800,fontSize=10,ctx1.font=getFont(),ctx1.textAlign="midde",ctx1.fillStyle="gray",ballheight>0&&0==showV&&ctx1.fillText("H",.22*w1,(newy+radius*h1+(newy+radius*w1*Math.cos(iteration)))/2),ballheight>0&&1==showV&&ctx1.fillText("H = "+ballheight+" m",.22*w1,(newy+radius*h1+(newy+radius*w1*Math.cos(iteration)))/2),ballheight>radius&&0==speedbottom&&(initialspeed=0),ypos=radius-radius*Math.cos(iteration),ke=kebottom-(pe=mass*grav*ypos),centriF=mass*initialspeed*initialspeed/radius,radialw=(weight=mass*grav)*Math.cos(iteration),tension=centriF+radialw,1==dothecentrif&&drawcentripetalforcelabels(),1==dotheenergy&&drawenergybars(pe,ke,kebottom),1==dothetension&&drawtensionlabels(),1==dotheweight&&drawweightlabels(),1==dothetotalforce&&0==dothecomponents&&drawtotalforcelabels(),1==dothetotalforce&&1==dothecomponents&&(drawtotalforcelabels(),drawtensionlabels(),drawweightlabels()),1==dothetotalforce&&drawtotalforcelabels(),1==dothetotalaccn&&0==dothecomponents&&drawtotalaccnlabels(),1==dothetotalaccn&&1==dothecomponents&&(drawtotalaccnlabels(),drawradialaccnlabels(),drawtangentialaccnlabels()),1==dothespeed&&drawspeedlabels(),(ballheight>radius&&speedbottom<Math.sqrt(5*radius*grav)||ballheight>radius&&0==initialspeed&&0==firstloopwithdrop)&&(document.getElementById("speedRange").disabled=!0,document.getElementById("speedRange").value=0,htmltextchange(),drawacircle=!1,hposForParaLast=inithposForPara,vposForParaLast=initvposForPara,inithposForPara=newx+radius*w1*Math.sin(iteration),initvposForPara=newy+radius*h1*Math.cos(iteration),(tension<=0||ypos>=2*radius||ballheight>radius&&0==initialspeed&&0==firstloopwithdrop)&&(dropclick=0,firstloopwithdrop=!1,(ballheight<=radius||speedbottom>0)&&(vpos<2*radius&&(hposForParaChange=inithposForPara-hposForParaLast),vpos>=2*radius&&(hposForParaChange=0),vpos<2*radius&&(vposForParaChange=initvposForPara-vposForParaLast),vpos>=2*radius&&(vposForParaChange=0),inithposForPara>=newx&&(leavecircleposright=!0),inithposForPara<newx&&(leavecircleposright=!1)),ballheight>radius&&0==speedbottom&&(initialspeed=0,hposForParaChange=0,vposForParaChange=0),drawacircle=!1,dir=Math.abs(dir))),dir=1,inithposForPara=newx+radius*w1*Math.sin(iteration),initvposForPara=newy+radius*h1*Math.cos(iteration),drawacircle=!0),0==stop)){if(1==intersect&&(hpos>=newx&&(dir=1),hpos<=newx&&(dir=-1),vpos<=newy&&(iteration=Math.PI+Math.atan((hpos-newx)/(vpos-newy))),vpos>newy&&(iteration=Math.atan((hpos-newx)/(vpos-newy))),vpos<=radius&&(kebottom=(kebottom-pedropforcircle)*Math.sin(Math.abs(iteration))),vpos>radius&&(kebottom-=pedropforcircle),speedbottom=.995*Math.abs(Math.sin(iteration))*Math.sqrt(2*grav*ypos+speed*speed),drawacircle=!0,intersect=!1),1==drawacircle&&(document.getElementById("speedRange").disabled=!1,dropclick=0,ballheight>radius&&0==speedbottom&&(initialspeed=0),iteration>=2*Math.PI&&(iteration=0),iteration<=2*-Math.PI&&(iteration=0),kebottom=.5*mass*speedbottom*speedbottom,0==speedbottom&&(kebottom=0),oldypos=ypos,ypos=radius-radius*Math.cos(iteration),ke=kebottom-(pe=mass*grav*ypos),pe>=kebottom&&ypos>=oldypos&&(dir*=-1,swingcount+=1),speed=dir*Math.sqrt(Math.abs(2*ke/mass)),centriF=mass*speed*speed/radius,radialw=(weight=mass*grav)*Math.cos(iteration),tension=centriF+radialw,flyaway&&(tension=-3),document.getElementById("freezetopid").disabled=!1,document.getElementById("freezesideid").disabled=!1,document.getElementById("freezebottomid").disabled=!1,speedbottom<Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!0),speedbottom>=Math.sqrt(5*radius*grav)&&(document.getElementById("freezetopid").disabled=!1),speedbottom<Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!0),speedbottom>=Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!1),0==flyaway&&3==thing&&(ctx1.lineWidth=3,ctx1.beginPath(),ctx1.moveTo(newx,newy),ctx1.lineTo(newx+(radius-ballradius)*w1*Math.sin(iteration),newy+(radius-ballradius)*h1*Math.cos(iteration)),ctx1.stroke(),ctx1.lineWidth=1),ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.ellipse(newx+radius*w1*Math.sin(iteration),newy+radius*h1*Math.cos(iteration),ballradius*w1,ballradius*h1,2*Math.PI,0,2*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill(),ctx1.strokeStyle="gray",ctx1.lineWidth=1,ctx1.setLineDash([2,5]),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*h1),ctx1.lineTo(newx+radius*w1,newy+radius*h1),ctx1.stroke(),ctx1.closePath(),ctx1.beginPath(),ctx1.moveTo(0,newy+(radius-savedballheight)*h1),ctx1.lineTo(newx+radius*w1,newy+(radius-savedballheight)*h1),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),x1=.2*w1,y1=newy+radius*h1,x2=.2*w1,y2=newy+(radius-savedballheight)*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),x1=.2*w1,y1=newy+(radius-savedballheight)*h1,x2=.2*w1,y2=newy+radius*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),fontBase=800,fontSize=10,ctx1.font=getFont(),ctx1.textAlign="midde",ctx1.fillStyle="gray",ballheight>0&&0==showV&&ctx1.fillText("H",.22*w1,(newy+radius*h1+(newy+(radius-savedballheight)*h1))/2),ballheight>0&&1==showV&&ctx1.fillText("H = "+ballheight+" m",.22*w1,(newy+radius*h1+(newy+(radius-savedballheight)*h1))/2),hposForParaLast=inithposForPara,vposForParaLast=initvposForPara,inithposForPara=newx+radius*w1*Math.sin(iteration),initvposForPara=newy+radius*h1*Math.cos(iteration),1==dothecentrif&&drawcentripetalforcelabels(),1==dotheenergy&&drawenergybars(pe,ke,kebottom),1==dothetension&&drawtensionlabels(),1==dotheweight&&drawweightlabels(),1==dothetotalforce&&0==dothecomponents&&drawtotalforcelabels(),1==dothetotalforce&&1==dothecomponents&&(drawtotalforcelabels(),drawtensionlabels(),drawweightlabels()),1==dothetotalforce&&drawtotalforcelabels(),1==dothetotalaccn&&0==dothecomponents&&drawtotalaccnlabels(),1==dothetotalaccn&&1==dothecomponents&&(drawtotalaccnlabels(),drawradialaccnlabels(),drawtangentialaccnlabels()),1==dothespeed&&drawspeedlabels(),1==showV&&showperiod(),(tension<=0||ballheight>radius&&0==initialspeed&&0==firstloopwithdrop)&&(firstloopwithdrop=!0,dropclick=0,inithposForPara>newx&&(leavecircleposright=!0),inithposForPara<=newx&&(leavecircleposright=!1),iterationwhendropped=iteration,speedwhendropped=Math.abs(speed),ballheight>radius&&0==initialspeed&&tension>0&&(speedwhendropped=0),drawacircle=!1,hposForParaLast=inithposForPara,vposForParaLast=initvposForPara,hpos=inithposForPara+2.1*dir*speedwhendropped*Math.cos(iterationwhendropped)*dropclick,vpos=initvposForPara+(-dir*gravdropmultiplier*speedwhendropped*Math.sin(iterationwhendropped)*dropclick+speeddropmultiplier*gravdrop*dropclick*dropclick))),0==drawacircle){if(ballheight>radius&&0==speedbottom&&(initialspeed=0),0==flyaway&&(gravdrop=.3*grav),1==flyaway&&(gravdrop=.153*grav),hposlast=hpos,vposlast=vpos,0==speedwhendropped&&(hpos=hposlast),speedwhendropped>0&&(hpos=inithposForPara+2.1*dir*speedwhendropped*Math.cos(iterationwhendropped)*dropclick),vpos=initvposForPara+(-dir*gravdropmultiplier*speedwhendropped*Math.sin(iterationwhendropped)*dropclick+speeddropmultiplier*gravdrop*dropclick*dropclick),0==speedwhendropped&&initvposForPara>radius)hpos=inithposForPara,totalenergydrop=(kedrop=.5*mass*speedwhendropped*speedwhendropped+mass*grav*(totalfallheight=(newy+radius*h1-initvposForPara)/h1)-(pedrop=mass*grav*((newy+radius*h1-vpos)/h1)))+pedrop,kebottom=mass*grav*totalfallheight-1.2*(pedropforcircle=mass*grav*(totalfallheight-(fallheight=ypos-radius))),speedbottom=Math.sqrt(2*kebottom/mass),1==dothespeed&&drawparabolaspeedlabels(),1==dotheenergy&&drawenergydropbars(pedrop,kedrop,totalenergydrop),1!=dotheweight&&1!=dothetotalforce||drawparabolaweightlabels(),1==dothetotalaccn&&drawparabolaaccnlabels();if(0==dofreeze&&0==slowmo&&(dropclick+=frametime),0==dofreeze&&1==slowmo&&(dropclick+=.1*frametime),Math.pow(hpos-newx,2)+Math.pow(vpos-newy,2)>=Math.pow(1.002*radius*h1,2)==1&&vposlast<=vpos&&(intersect=!0),Math.pow(hpos-newx,2)+Math.pow(vpos-newy,2)>=Math.pow(1.01*radius*h1,2)==1&&vposlast<=vpos&&(intersect=!0),ballheight>radius&&0==initialspeed&&0==firstloopwithdrop&&(intersect=!0),1==flyaway&&(intersect=!1),0==flyaway&&3==thing&&(ctx1.lineWidth=3,slacklength=Math.sqrt(Math.pow(hpos-newx,2)+Math.pow(vpos-newy,2)),ctx1.beginPath(),ctx1.moveTo(newx,newy),ctx1.quadraticCurveTo(.5*(newx+hpos),(newy+vpos)/2+1.3*(radius*h1-slacklength),hpos,vpos),ctx1.lineTo(hpos,vpos),ctx1.stroke(),ctx1.lineWidth=1),ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.ellipse(hpos,vpos,ballradius*w1,ballradius*h1,2*Math.PI,0,2*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill(),speedwhendropped>0&&(totalenergydrop=(kedrop=.5*mass*speedwhendropped*speedwhendropped+mass*grav*(totalfallheight=(newy+radius*h1-initvposForPara)/h1)-(pedrop=mass*grav*(fallheight=(newy+radius*h1-vpos)/h1)))+pedrop,pedropforcircle=mass*grav*(totalfallheight-fallheight),1==dothespeed&&drawparabolaspeedlabels(),1==dotheenergy&&drawenergydropbars(pedrop,kedrop,totalenergydrop),1!=dotheweight&&1!=dothetotalforce||drawparabolaweightlabels(),1==dothetotalaccn&&drawparabolaaccnlabels()),0==speedwhendropped&&(totalenergydrop=(kedrop=mass*grav*(totalfallheight=(newy+radius*h1-initvposForPara)/h1)-(pedrop=mass*grav*(fallheight=(newy+radius*h1-vpos)/h1)))+pedrop,pedropforcircle=mass*grav*(totalfallheight-fallheight),1==dothespeed&&drawparabolaspeedlabels(),1==dotheenergy&&drawenergydropbars(pedrop,kedrop,totalenergydrop),1!=dotheweight&&1!=dothetotalforce||drawparabolaweightlabels(),1==dothetotalaccn&&drawparabolaaccnlabels()),1==showV){ctx1.fillStyle="black";r=(newy-vpos)/h1+radius;ctx1.textAlign="left",fontBase=800,fontSize=9,ctx1.font=getFont(),ctx1.fillText("Height = "+r.toFixed(3)+" m",.05*w1,.2*h1),ctx1.fillText("Speed = "+Math.abs(Math.sqrt(2*kedrop/mass)).toFixed(3)+" m/s",.05*w1,.1*h1)}}(hpos>5*w1||hpos<5*-w1||vpos>5*h1||vpos<5*-h1)&&(flyaway=!1,stop=!0,document.getElementById("ballflyaway").checked=!1,reset()),ctx1.strokeStyle="gray",ctx1.lineWidth=1,ctx1.setLineDash([2,5]),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*h1),ctx1.lineTo(newx+radius*w1,newy+radius*h1),ctx1.stroke(),ctx1.closePath(),ctx1.beginPath(),ctx1.moveTo(0,newy+(radius-savedballheight)*h1),ctx1.lineTo(newx+radius*w1,newy+(radius-savedballheight)*h1),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),x1=.2*w1,y1=newy+radius*h1,x2=.2*w1,y2=newy+(radius-savedballheight)*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),x1=.2*w1,y1=newy+(radius-savedballheight)*h1,x2=.2*w1,y2=newy+radius*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),fontBase=800,fontSize=10,ctx1.font=getFont(),ctx1.textAlign="midde",ctx1.fillStyle="gray",ballheight>0&&0==showV&&ctx1.fillText("H",.22*w1,(newy+radius*h1+(newy+(radius-savedballheight)*h1))/2),ballheight>0&&1==showV&&ctx1.fillText("H = "+ballheight+" m",.22*w1,(newy+radius*h1+(newy+(radius-savedballheight)*h1))/2)}if(4==thing&&(document.getElementById("speedRange").disabled=!1,ballleftramp=!0,1==showV&&showperiod(),ctx1.lineWidth=3,ctx1.beginPath(),ctx1.setLineDash([2,5]),ctx1.ellipse(newx,newy,radius*w1,radius*h1,2*Math.PI,0,2*Math.PI),ctx1.stroke(),ctx1.setLineDash([]),1==stop&&(initialspeed=Number(speedslider.value).valueOf(),(ballheight=Number(ballheightslider.value).valueOf())>2*radius&&grav>0&&(ballheight=radius),radius=Number(radiusslider.value).valueOf(),htmltextchange(),iteration=Math.acos((radius-ballheight)/radius),kebottom=.5*mass*initialspeed*initialspeed+mass*grav*ballheight,(speedbottom=Math.sqrt(2*kebottom/mass))<Math.sqrt(4*radius*grav)&&(document.getElementById("freezetopid").disabled=!0),speedbottom>=Math.sqrt(4*radius*grav)&&(document.getElementById("freezetopid").disabled=!1),speedbottom<Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!0),speedbottom>=Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!1),ctx1.lineWidth=3,ctx1.beginPath(),ctx1.setLineDash([2,5]),ctx1.ellipse(newx,newy,radius*w1,radius*h1,2*Math.PI,0,2*Math.PI),ctx1.stroke(),ctx1.setLineDash([]),ctx1.strokeStyle="gray",ctx1.lineWidth=14,ctx1.beginPath(),ctx1.moveTo(newx,newy),ctx1.lineTo(newx+(radius-ballradius)*w1*Math.sin(iteration),newy+(radius-ballradius)*h1*Math.cos(iteration)),ctx1.stroke(),ctx1.lineWidth=1,ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.beginPath(),ctx1.ellipse(newx+radius*w1*Math.sin(iteration),newy+radius*h1*Math.cos(iteration),ballradius*w1,ballradius*h1,2*Math.PI,0,2*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill(),ctx1.strokeStyle="gray",ctx1.lineWidth=1,ctx1.setLineDash([2,5]),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*h1),ctx1.lineTo(w1+radius*w1,newy+radius*h1),ctx1.stroke(),ctx1.closePath(),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*w1*Math.cos(iteration)),ctx1.lineTo(w1+radius*w1,newy+radius*w1*Math.cos(iteration)),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),x1=.2*w1,y1=newy+radius*h1,x2=.2*w1,y2=newy+radius*w1*Math.cos(iteration),drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),x1=.2*w1,y1=newy+radius*w1*Math.cos(iteration),x2=.2*w1,y2=newy+radius*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),fontBase=800,fontSize=10,ctx1.font=getFont(),ctx1.textAlign="midde",ctx1.fillStyle="gray",ballheight>0&&0==showV&&ctx1.fillText("H",.22*w1,(newy+radius*h1+(newy+radius*w1*Math.cos(iteration)))/2),ballheight>0&&1==showV&&ctx1.fillText("H = "+ballheight+" m",.22*w1,(newy+radius*h1+(newy+radius*w1*Math.cos(iteration)))/2),ypos=radius-radius*Math.cos(iteration),ke=kebottom-(pe=mass*grav*ypos),centriF=mass*initialspeed*initialspeed/radius,speed=initialspeed,radialw=(weight=mass*grav)*Math.cos(iteration),tension=centriF+radialw,1==dotheenergy&&drawenergybars(pe,ke,kebottom),1==dothetension&&drawtensionlabels(),1==dotheweight&&drawweightlabels(),1==dothecentrif&&drawcentripetalforcelabels(),1==dothetotalforce&&0==dothecomponents&&drawtotalforcelabels(),1==dothetotalforce&&1==dothecomponents&&(drawtotalforcelabels(),drawtensionlabels(),drawweightlabels()),1==dothetotalforce&&drawtotalforcelabels(),1==dothetotalaccn&&0==dothecomponents&&drawtotalaccnlabels(),1==dothetotalaccn&&1==dothecomponents&&(drawtotalaccnlabels(),drawradialaccnlabels(),drawtangentialaccnlabels()),1==dothespeed&&drawspeedlabels(),hposForParaLast=inithposForPara,vposForParaLast=initvposForPara,inithposForPara=newx+radius*w1*Math.sin(iteration),initvposForPara=newy+radius*h1*Math.cos(iteration),dir=1),0==stop&&0==flyaway&&(ballheight>2*radius&&grav>0&&(savedballheight=ballheight=2*radius),iteration>=2*Math.PI&&(iteration=0),iteration<=2*-Math.PI&&(iteration=0),kebottom=.5*mass*speedbottom*speedbottom,0==speedbottom&&(kebottom=0),oldypos=ypos,ypos=radius-radius*Math.cos(iteration),(pe=mass*grav*ypos)>=kebottom&&ypos>=oldypos&&(dir*=-1,swingcount+=1),ke=kebottom-pe,speed=dir*Math.sqrt(Math.abs(2*ke/mass)),centriF=mass*speed*speed/radius,radialw=(weight=mass*grav)*Math.cos(iteration),tension=centriF+radialw,speedbottom<Math.sqrt(4*radius*grav)&&(document.getElementById("freezetopid").disabled=!0),speedbottom>=Math.sqrt(4*radius*grav)&&(document.getElementById("freezetopid").disabled=!1),speedbottom<Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!0),speedbottom>=Math.sqrt(2*radius*grav)&&(document.getElementById("freezesideid").disabled=!1),ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.ellipse(newx+radius*w1*Math.sin(iteration),newy+radius*h1*Math.cos(iteration),ballradius*w1,ballradius*h1,2*Math.PI,0,2*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill(),ctx1.strokeStyle="gray",ctx1.lineWidth=14,ctx1.beginPath(),ctx1.moveTo(newx,newy),ctx1.lineTo(newx+(radius-ballradius)*w1*Math.sin(iteration),newy+(radius-ballradius)*h1*Math.cos(iteration)),ctx1.stroke(),ctx1.lineWidth=1,ctx1.strokeStyle="gray",ctx1.lineWidth=1,ctx1.setLineDash([2,5]),ctx1.beginPath(),ctx1.moveTo(0,newy+radius*h1),ctx1.lineTo(w1+radius*w1,newy+radius*h1),ctx1.stroke(),ctx1.closePath(),ctx1.beginPath(),ctx1.moveTo(0,newy+(radius-savedballheight)*h1),ctx1.lineTo(w1+radius*w1,newy+(radius-savedballheight)*h1),ctx1.stroke(),ctx1.closePath(),ctx1.setLineDash([]),x1=.2*w1,y1=newy+radius*h1,x2=.2*w1,y2=newy+(radius-savedballheight)*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),x1=.2*w1,y1=newy+(radius-savedballheight)*h1,x2=.2*w1,y2=newy+radius*h1,drawArrow(ctx1,x1,y1,x2,y2,.25,"gray"),fontBase=800,fontSize=10,ctx1.font=getFont(),ctx1.textAlign="midde",ctx1.fillStyle="gray",ballheight>0&&0==showV&&ctx1.fillText("H",.22*w1,(newy+radius*h1+(newy+(radius-savedballheight)*h1))/2),ballheight>0&&1==showV&&ctx1.fillText("H = "+ballheight+" m",.22*w1,(newy+radius*h1+(newy+(radius-savedballheight)*h1))/2),1==dotheenergy&&drawenergybars(pe,ke,kebottom),1==dothetension&&drawtensionlabels(),1==dotheweight&&drawweightlabels(),1==dothecentrif&&drawcentripetalforcelabels(),1==dothetotalforce&&0==dothecomponents&&drawtotalforcelabels(),1==dothetotalforce&&1==dothecomponents&&(drawtotalforcelabels(),drawtensionlabels(),drawweightlabels()),1==dothetotalforce&&drawtotalforcelabels(),1==dothetotalaccn&&0==dothecomponents&&drawtotalaccnlabels(),1==dothetotalaccn&&1==dothecomponents&&(drawtotalaccnlabels(),drawradialaccnlabels(),drawtangentialaccnlabels()),1==dothespeed&&drawspeedlabels(),hposForParaLast=inithposForPara,vposForParaLast=initvposForPara,inithposForPara=newx+radius*w1*Math.sin(iteration),initvposForPara=newy+radius*h1*Math.cos(iteration),hposForParaChange=inithposForPara-hposForParaLast,vposForParaChange=initvposForPara-vposForParaLast,click=0,inithposForPara>newx&&(leavecircleposright=!0),inithposForPara<=newx&&(leavecircleposright=!1),iterationwhendropped=iteration,speedwhendropped=Math.abs(speed),hposlast=hpos,vposlast=vpos,hpos=inithposForPara+2.4*dir*frametime*speedwhendropped*Math.cos(iterationwhendropped)*click,vpos=initvposForPara+(-dir*gravdropmultiplier*frametime*speedwhendropped*Math.sin(iterationwhendropped)*click+.014*frametime*gravdrop*click*click)),0==stop&&1==flyaway)){if(ballheight>radius&&0==speedbottom&&(initialspeed=0),0==flyaway&&(gravdrop=.3*grav),1==flyaway&&(gravdrop=.153*grav),hposlast=hpos,vposlast=vpos,0==speedwhendropped&&(hpos=hposlast),speedwhendropped>0&&(hpos=inithposForPara+2.1*dir*speedwhendropped*Math.cos(iterationwhendropped)*dropclick),vpos=initvposForPara+(-dir*gravdropmultiplier*speedwhendropped*Math.sin(iterationwhendropped)*dropclick+speeddropmultiplier*gravdrop*dropclick*dropclick),0==speedwhendropped&&initvposForPara>radius)hpos=inithposForPara,totalenergydrop=(kedrop=.5*mass*speedwhendropped*speedwhendropped+mass*grav*(totalfallheight=(newy+radius*h1-initvposForPara)/h1)-(pedrop=mass*grav*((newy+radius*h1-vpos)/h1)))+pedrop,kebottom=mass*grav*totalfallheight-1.2*(pedropforcircle=mass*grav*(totalfallheight-(fallheight=ypos-radius))),speedbottom=Math.sqrt(2*kebottom/mass),1==dothespeed&&drawparabolaspeedlabels(),1==dotheenergy&&drawenergydropbars(pedrop,kedrop,totalenergydrop),1!=dotheweight&&1!=dothetotalforce||drawparabolaweightlabels(),1==dothetotalaccn&&drawparabolaaccnlabels();if(0==dofreeze&&0==slowmo&&(dropclick+=frametime),0==dofreeze&&1==slowmo&&(dropclick+=.1*frametime),Math.pow(hpos-newx,2)+Math.pow(vpos-newy,2)>=Math.pow(1.002*radius*h1,2)==1&&vposlast<=vpos&&(intersect=!0),Math.pow(hpos-newx,2)+Math.pow(vpos-newy,2)>=Math.pow(1.01*radius*h1,2)==1&&vposlast<=vpos&&(intersect=!0),ballheight>radius&&0==initialspeed&&0==firstloopwithdrop&&(intersect=!0),1==flyaway&&(intersect=!1),0==flyaway&&3==thing&&(ctx1.lineWidth=3,slacklength=Math.sqrt(Math.pow(hpos-newx,2)+Math.pow(vpos-newy,2)),ctx1.beginPath(),ctx1.moveTo(newx,newy),ctx1.quadraticCurveTo(.5*(newx+hpos),(newy+vpos)/2+1.3*(radius*h1-slacklength),hpos,vpos),ctx1.lineTo(hpos,vpos),ctx1.stroke(),ctx1.lineWidth=1),ctx1.fillStyle=grav>0?"#ffa600":"#0059ff",ctx1.strokeStyle="black",ctx1.lineWidth=1,ctx1.beginPath(),ctx1.ellipse(hpos,vpos,ballradius*w1,ballradius*h1,2*Math.PI,0,2*Math.PI),ctx1.closePath(),ctx1.stroke(),ctx1.fill(),speedwhendropped>0&&(totalenergydrop=(kedrop=.5*mass*speedwhendropped*speedwhendropped+mass*grav*(totalfallheight=(newy+radius*h1-initvposForPara)/h1)-(pedrop=mass*grav*(fallheight=(newy+radius*h1-vpos)/h1)))+pedrop,pedropforcircle=mass*grav*(totalfallheight-fallheight),1==dothespeed&&drawparabolaspeedlabels(),1==dotheenergy&&drawenergydropbars(pedrop,kedrop,totalenergydrop),1!=dotheweight&&1!=dothetotalforce||drawparabolaweightlabels(),1==dothetotalaccn&&drawparabolaaccnlabels()),0==speedwhendropped&&(totalenergydrop=(kedrop=mass*grav*(totalfallheight=(newy+radius*h1-initvposForPara)/h1)-(pedrop=mass*grav*(fallheight=(newy+radius*h1-vpos)/h1)))+pedrop,pedropforcircle=mass*grav*(totalfallheight-fallheight),1==dothespeed&&drawparabolaspeedlabels(),1==dotheenergy&&drawenergydropbars(pedrop,kedrop,totalenergydrop),1!=dotheweight&&1!=dothetotalforce||drawparabolaweightlabels(),1==dothetotalaccn&&drawparabolaaccnlabels()),1==showV){ctx1.fillStyle="black";r=(newy-vpos)/h1+radius;ctx1.textAlign="left",fontBase=800,fontSize=9,ctx1.font=getFont(),ctx1.fillText("Height = "+r.toFixed(3)+" m",.05*w1,.2*h1),ctx1.fillText("Speed = "+Math.abs(Math.sqrt(2*kedrop/mass)).toFixed(3)+" m/s",.05*w1,.1*h1)}(hpos>5*w1||hpos<5*-w1||vpos>5*h1||vpos<5*-h1)&&(flyaway=!1,stop=!0,document.getElementById("ballflyaway").checked=!1,reset())}3!=thing&&4!=thing||(ctx1.beginPath(),ctx1.fillStyle="black",ctx1.ellipse(newx,newy,.02*w1,.02*h1,2*Math.PI,0,2*Math.PI),ctx1.fill())}function reset(){if(document.getElementById("ballheightRange").disabled=!1,document.getElementById("startButton").style.background="green",document.getElementById("resetButton").style.background="gray",document.getElementById("pauseButton").style.background="gray",document.getElementById("freezetopid").checked=!1,document.getElementById("freezebottomid").checked=!1,document.getElementById("freezetopid").checked=!1,document.getElementById("freezesideid").checked=!1,document.getElementById("equationid").checked=!1,document.getElementById("infoid").checked=!1,document.getElementById("ballflyaway").checked=!1,dofreeze=!1,dofreezetop=!1,dofreezebottom=!1,dofreezeside=!1,flyaway=!1,1==starthasbeenpressed&&(document.getElementById("ballheightRange").value=savedballheight,document.getElementById("speedRange").value=savedinitialspeed,document.getElementById("gRange").value=savedgrav,document.getElementById("massRange").value=savedmass,document.getElementById("radiusRange").value=savedradius,htmltextchange()),grav=Number(gslider.value).valueOf(),mass=Number(masslider.value).valueOf(),radius=Number(radiusslider.value).valueOf(),ballheight=Number(ballheightslider.value).valueOf(),0==slowmo&&(document.getElementById("slowButton").style.background="green"),1==slowmo&&(document.getElementById("slowButton").style.background="red"),document.getElementById("pspeed").innerHTML=" Initial speed at starting point =  <span style='color:Crimson'>"+initialspeed.toFixed(3)+" m/s</span>",grav>0&&1==gzero){gzero=!1,gnotzero=!0;const e="html {\n                              -webkit-filter: invert(0%);\n                              -moz-filter: invert(0%);\n                              -o-filter: invert(0%);\n                              -ms-filter: invert(0%);\n                          }",t=document.head,a=document.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)),t.appendChild(a)}if(dir=1,drawacircle=!0,click=0,intersect=!1,leavecircleposright=!1,slacklength=0,hpos=0,vpos=0,hposlast=0,vposlast=0,hposlastdelta=0,vposlastdelta=0,speedhitcircle=0,anglehitcircle=0,KEhit=0,PEhit=0,TotalEnergyhit=0,kebottom=0,speedbottom=0,initialspeed=0,totalfallheight=0,fallheight=0,pedrop=0,kedrop=0,totalenergydrop=0,firstloopwithdrop=!1,dropclick=0,hpos=0,hposlast=0,speedwhendropped=0,inithposForPara=0,iterationwhendropped=0,initialspeed=0,CenterToTopOfRamp=0,LengthOfRamp=0,rampangle=0,starthasbeenpressed=!1,RampInitHoriz=0,RampInitVert=0,rampaccn=0,rampspeed=0,rampdist=0,rampdistx=0,rampdisty=0,rampclick=0,ballleftramp=!1,ballreachedcircle=!1,ballisonramp=!1,flyofframp=!1,period=0,totaltime=0,swanglenow=0,swangle=0,kebottom=.5*mass*(speedbottom=0)*speedbottom,0==speedbottom&&(kebottom=0),ypos=radius-radius*Math.cos(iteration),ke=kebottom-(pe=mass*grav*ypos),speed=dir*Math.sqrt(Math.abs(2*ke/mass)),centriF=mass*speed*speed/radius,radialw=(weight=mass*grav)*Math.cos(iteration),tension=centriF+radialw,period=0,totaltime=0,swanglenow=0,swangle=0,gcount=0,1==showgraphs&&ctxg.clearRect(0,0,canvasgraph.width,canvasgraph.height),silly=0,stop=!0,gcount=0,lastposition=0,lastlastposition=0,lastspeed=0,lasta=0,sumofperiods=ballisontrackforgraph=0,writetangential=!0,circleperiod=0,circletime=0,completecircle=!1,oldcircletime=0,swingcount=0,setBallPositionWithMouse=!1,0==grav&&1==gnotzero){gzero=!0,gnotzero=!1;const e="html {\n                             -webkit-filter: invert(100%);\n                             -moz-filter: invert(100%);\n                             -o-filter: invert(100%);\n                             -ms-filter: invert(100%);\n                         }",t=document.head,a=document.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)),t.appendChild(a)}drawsky()}function showtheequations(){showequations=!0,document.getElementById("equationid").checked=!1,document.getElementById("equations").style.zIndex="+3",ctxEq.clearRect(0,0,canvasequations.width,canvasequations.height),ctxEq.fillStyle="black",ctxEq.strokeStyle="black",ctxEq.lineWidth=3,ctxEq.beginPath(),ctxEq.rect(0,0,weq,heq),ctxEq.stroke(),ctxEq.closePath(),ctxEq.fillStyle="lightyellow",ctxEq.beginPath(),ctxEq.fillRect(.4425*weq,.1525*heq,.535*weq,.795*heq),ctxEq.closePath(),ctxEq.fill(),ctxEq.fillStyle="lightyellow",ctxEq.beginPath(),ctxEq.rect(.04*weq,.17*heq,.37*weq,.335*heq),ctxEq.closePath(),ctxEq.fill(),ctxEq.fillStyle="lightyellow",ctxEq.beginPath(),ctxEq.rect(.04*weq,.515*heq,.37*weq,.237*heq),ctxEq.closePath(),ctxEq.fill(),ctxEq.fillStyle="lightyellow",ctxEq.beginPath(),ctxEq.rect(.04*weq,.762*heq,.37*weq,.16*heq),ctxEq.fill(),ctxEq.fillStyle="khaki",ctxEq.beginPath(),ctxEq.rect(.46*weq,.375*heq,.5*weq,.325*heq),ctxEq.fill(),ctxEq.beginPath(),ctxEq.lineWidth=1,ctxEq.rect(.03*weq,.15*heq,.39*weq,.8*heq),ctxEq.rect(.44*weq,.15*heq,.54*weq,.8*heq),ctxEq.rect(.04*weq,.17*heq,.37*weq,.335*heq),ctxEq.rect(.04*weq,.515*heq,.37*weq,.237*heq),ctxEq.rect(.04*weq,.762*heq,.37*weq,.16*heq),ctxEq.rect(.46*weq,.375*heq,.5*weq,.325*heq),ctxEq.closePath(),ctxEq.stroke(),fontBase=800,fontSize=30,ctxEq.font=getFont2(),ctxEq.textAlign="center",ctxEq.fillStyle="crimson",ctxEq.fillText("VerticalCircleSim",.25*weq,.1*heq),ctxEq.textAlign="right",fontBase=800,fontSize=24,ctxEq.fillStyle="black",ctxEq.font=getFont2(),ctxEq.fillText("Download this free app from kirbyx.com",.98*weq,.1*heq),fontBase=800,fontSize=13,ctxEq.font=getFont2(),ctxEq.fillStyle="darkblue",ctxEq.textAlign="left";var e=ctxEq.measureText("F").width,t=(ctxEq.measureText(" =  F ").width,ctxEq.measureText("Fgravity").width),a=ctxEq.measureText("PE").width;ctxEq.measureText("PEgravity").width;ctxEq.textBaseline="bottom",ctxEq.fillText("Speed   =   distance / ∆ time",.05*weq,.2*heq),ctxEq.fillText("F",.05*weq,.25*heq),ctxEq.textBaseline="middle",ctxEq.fillText("grav",e+.05*weq,.25*heq),ctxEq.textBaseline="bottom",ctxEq.fillText(" =   mg        ...also known as 'weight'.",t+.05*weq,.25*heq),ctxEq.fillText("F",.05*weq,.3*heq),ctxEq.textBaseline="middle",ctxEq.fillText("c",e+.05*weq,.3*heq),ctxEq.textBaseline="bottom",ctxEq.fillText(" =   mv² / r   ...total force towards center of circle.",t+.05*weq,.3*heq),ctxEq.fillText("a",.05*weq,.35*heq),ctxEq.textBaseline="middle",ctxEq.fillText("c",e+.05*weq,.35*heq),ctxEq.textBaseline="bottom",ctxEq.fillText(" =    v² / r     ...acceleration towards center of circle.",t+.05*weq,.35*heq),ctxEq.fillText("PE",.05*weq,.4*heq),ctxEq.textBaseline="middle",ctxEq.fillText("grav",a+.05*weq,.4*heq),ctxEq.textBaseline="bottom",ctxEq.fillText(" =   mg∆h    ... if g is uniform.",t+.05*weq,.4*heq),ctxEq.fillText("KE         =   ½ mv²",.05*weq,.45*heq),ctxEq.fillText("a            =   ∆v / ∆t",.05*weq,.5*heq),ctxEq.fillText("For triangles that have a right angle:",.05*weq,.55*heq),ctxEq.fillText("     Pythagoras:",.05*weq,.59*heq),ctxEq.fillText("            longest side² = shorter side² + the other shorter side²",.05*weq,.62*heq),ctxEq.fillText("     sin θ  = side opposite to angle / longest side",.05*weq,.665*heq),ctxEq.fillText("     cos θ = side adjacent to angle / longest side",.05*weq,.695*heq),ctxEq.fillText("     tan θ  = side opposite to angle / side adjacent to angle",.05*weq,.725*heq),ctxEq.lineWidth=3,ctxEq.strokeStyle="green",ctxEq.beginPath(),ctxEq.ellipse(.07*weq,.8*heq,.015*weq,.015*weq,0,2/3*Math.PI,4/3*Math.PI),ctxEq.stroke(),ctxEq.closePath(),ctxEq.strokeStyle="red",ctxEq.beginPath(),ctxEq.moveTo(.07*weq,.8*heq),ctxEq.lineTo(.044*weq,.8*heq),ctxEq.stroke(),ctxEq.closePath(),ctxEq.strokeStyle="green",ctxEq.beginPath(),ctxEq.ellipse(.07*weq,.87*heq,.015*weq,.015*weq,0,2/3*Math.PI,4/3*Math.PI),ctxEq.stroke(),ctxEq.closePath(),ctxEq.strokeStyle="red",ctxEq.beginPath(),ctxEq.moveTo(.054*weq,.84*heq),ctxEq.lineTo(.054*weq,.9*heq),ctxEq.stroke(),ctxEq.closePath(),ctxEq.textBaseline="middle",ctxEq.fillText("Radial:        Towards or away from the center of a circle.",.087*weq,.8*heq),ctxEq.fillText("Tangent:       A straight line that touches the circumference of a",.08*weq,.87*heq),ctxEq.fillText("                     circle at only one point is 'tangential to the circle.'",.08*weq,.9*heq),fontBase=800,fontSize=13,ctxEq.font=getFont2(),ctxEq.fillStyle="black",ctxEq.fillText("The string and rod have negligable mass, there's negligable friction and no air.",.48*weq,.18*heq),ctxEq.fillText("T = 2π √(L/g) predicts the period of a simple pendulum with less than 1% error for swing   ",.48*weq,.23*heq),ctxEq.fillText("angles less than 22 degrees. Don't use it for larger angles!",.48*weq,.26*heq),ctxEq.fillText("∑E, shown in the energy bar charts, means 'total mechanical energy' (KE + PE) or (K + U).",.48*weq,.31*heq),ctxEq.fillText("Some of the ball's kinetic energy is lost at the moment it returns to the circle after dropping.",.48*weq,.34*heq),ctxEq.fillStyle="maroon",ctxEq.fillText("If an object is moving in a circle, then the total radial force exerted on the object is towards",.47*weq,.4*heq),ctxEq.fillText("the center of that circle, and is equal to mv²/r. This total force towards the center of ",.47*weq,.43*heq),ctxEq.fillText("the circle is given the name 'centripetal force'.",.47*weq,.46*heq),ctxEq.fillText("Important: Centripetal force is not an additional force: it is the sum of the radial forces exerted",.47*weq,.51*heq),ctxEq.fillText("on an object when the object is moving in a circle.",.47*weq,.54*heq),ctxEq.fillText("While the ball is moving in a circle, tangential forces will change the ball's speed and",.47*weq,.6*heq),ctxEq.fillText("velocity. However, a radial force can't change the ball's speed while it's moving in a circle,",.47*weq,.63*heq),ctxEq.fillText("but will change the ball's velocity by changing the direction in which the ball moves. ",.47*weq,.66*heq),ctxEq.fillStyle="black",ctxEq.fillText("'Centripetal force' : the total radial force that points towards the center of the circle.",.47*weq,.73*heq),ctxEq.fillText("'Centrifugal force' : the total radial force that points away from the center of the circle.",.47*weq,.79*heq),ctxEq.fillText("Centrifugal force is a 'ficticious force': it can occur only in a 'non-inertial frame of reference'.",.47*weq,.82*heq),ctxEq.fillText("Rotational dynamics are ignored in this simulation.",.47*weq,.88*heq),ctxEq.fillText("",.47*weq,.91*heq),ctxEq.textAlign="center",ctxEq.textBaseline="bottom",fontBase=800,fontSize=10,ctxEq.font=getFont2(),ctxEq.fillText("© 2002 Martin Kirby",.5*weq,.99*heq),fontBase=800,fontSize=15,ctxEq.font=getFont2(),ctxEq.fillStyle="green",ctxEq.fillRect(.9*weq,.9*heq,.08*weq,.08*heq),ctxEq.fillStyle="White",ctxEq.textAlign="center",ctxEq.textBaseline="middle",ctxEq.fillText("Close",.94*weq,.94*heq),ctxEq.textAlign="left",document.addEventListener("keypress",function(e){ctxEq.clearRect(0,0,canvasequations.width,canvasequations.height),showequations=!1,document.getElementById("equations").style.zIndex="-3",document.getElementById("equations").checked=!1}),document.getElementById("equations").onmousedown=function(){ctxEq.clearRect(0,0,canvasequations.width,canvasequations.height),document.getElementById("equations").style.zIndex="-3",document.getElementById("equations").checked=!1,showequations=!1}}function showinfobox(){document.getElementById("infoid").checked=!1,showinfo=!0,document.getElementById("info").style.zIndex="+3",ctxInfo.clearRect(0,0,canvasinfo.width,canvasinfo.height),ctxInfo.fillStyle="black",ctxInfo.strokeStyle="black",ctxInfo.beginPath(),ctxInfo.fillStyle="black",ctxInfo.lineWidth=4,ctxInfo.rect(0,0,winfo,hinfo),ctxInfo.closePath(),ctxInfo.stroke(),ctxInfo.beginPath(),fontBase=800,fontSize=25,ctxInfo.font=getFont2(),ctxInfo.textAlign="center",ctxInfo.fillStyle="crimson",ctxInfo.fillText("VerticalCircleSim",.5*winfo,.15*hinfo),ctxInfo.fill(),ctxInfo.closePath(),ctxInfo.beginPath(),ctxInfo.fillStyle="black",fontBase=800,fontSize=24,ctxInfo.font=getFont2(),ctxInfo.fillText("Download this free app from kirbyx.com",.5*winfo,.25*hinfo),ctxInfo.fill(),ctxInfo.closePath(),ctxInfo.textAlign="right",ctxInfo.beginPath(),fontBase=800,fontSize=15,ctxInfo.font=getFont2(),ctxInfo.fillStyle="darkBlue",ctxInfo.textAlign="center",ctxInfo.fillText("If you use and like this app, and would like to see improvements,",.5*winfo,.35*hinfo),ctxInfo.fillText("new apps, or to simply encourage me, providing more coffee",.5*winfo,.45*hinfo),ctxInfo.fillText("(black, no sugar) definitely helps. You can do that by sending a ",.5*winfo,.55*hinfo),ctxInfo.fillText("coffee's worth to my PayPal account using the orange 'Donate' button ",.5*winfo,.65*hinfo),ctxInfo.fillText("at the top of the screen.",.5*winfo,.75*hinfo),ctxInfo.fillText("Thank you! (from Martin Kirby)",.5*winfo,.87*hinfo),ctxInfo.textAlign="center",ctxInfo.textBaseline="bottom",fontBase=800,fontSize=15,ctxInfo.font=getFont2(),ctxInfo.fillStyle="black",ctxInfo.fillText("If you have questions or ideas, please send them to waveaddapp@gmail.com",.5*winfo,.99*hinfo),ctxInfo.fill(),ctxInfo.closePath(),ctxInfo.fillStyle="green",ctxInfo.fillRect(.9*winfo,.85*hinfo,.08*winfo,.12*hinfo),ctxInfo.fillStyle="White",ctxInfo.textAlign="center",ctxInfo.textBaseline="middle",ctxInfo.fillStyle="White",ctxInfo.textAlign="center",ctxInfo.fillText("Close",.94*winfo,.91*hinfo),ctxInfo.textAlign="left",document.addEventListener("keypress",function(e){ctxInfo.clearRect(0,0,canvasinfo.width,canvasinfo.height),showinfo=!1,document.getElementById("info").style.zIndex="-3"}),document.getElementById("info").onmousedown=function(){ctxInfo.clearRect(0,0,canvasinfo.width,canvasinfo.height),showinfo=!1,document.getElementById("info").style.zIndex="-3"}}function showgraphaxesandtext(){ctxg.fillStyle="black",ctxg.strokeStyle="black",ctxg.textAlign="right",ctxg.textBaseline="top",fontBase=800,fontSize=18,ctxg.font=getFont2(),ctxg.fillStyle="black",0==drawenergraphs&&ctxg.fillText("click on graph to see energy graphs",.975*wg,.025*hg),1==drawenergraphs&&ctxg.fillText("click on graph to see motion graphs",.975*wg,.025*hg),ctxg.beginPath(),ctxg.fillStyle="black",ctxg.lineWidth=2,ctxg.rect(0,0,wg,hg),ctxg.closePath(),ctxg.stroke(),fontBase=800,fontSize=20,ctxg.font=getFont2(),ctxg.textAlign="right",ctxg.textBaseline="middle",ctxg.lineWidth=1,ctxg.beginPath(),ctxg.strokeStyle="darkgreen",ctxg.fillStyle="green",0==drawenergraphs&&(ctxg.moveTo(.15*wg,hg/6),ctxg.lineTo(wg,hg/6)),1==drawenergraphs&&(ctxg.moveTo(.15*wg,2*hg/6-.01*hg),ctxg.lineTo(wg,2*hg/6-.01*hg)),ctxg.moveTo(.15*wg,0*hg/6+.01*hg),ctxg.lineTo(.15*wg,2*hg/6-.01*hg),ctxg.closePath(),ctxg.stroke(),ctxg.fillText("0",.14*wg,1*hg/6),ctxg.strokeStyle="darkblue",ctxg.fillStyle="blue",ctxg.beginPath(),0==drawenergraphs&&(ctxg.moveTo(.15*wg,3*hg/6),ctxg.lineTo(wg,3*hg/6)),1==drawenergraphs&&(ctxg.moveTo(.15*wg,4*hg/6-.01*hg),ctxg.lineTo(wg,4*hg/6-.01*hg)),ctxg.moveTo(.15*wg,2*hg/6+.01*hg),ctxg.lineTo(.15*wg,4*hg/6-.01*hg),ctxg.closePath(),ctxg.stroke(),ctxg.fillText("0",.14*wg,3*hg/6),ctxg.strokeStyle="purple",ctxg.fillStyle="purple",ctxg.beginPath(),0==drawenergraphs&&(ctxg.moveTo(.15*wg,5*hg/6),ctxg.lineTo(wg,5*hg/6)),1==drawenergraphs&&(ctxg.moveTo(.15*wg,6*hg/6-.01*hg),ctxg.lineTo(wg,6*hg/6-.01*hg)),ctxg.moveTo(.15*wg,4*hg/6+.01*hg),ctxg.lineTo(.15*wg,6*hg/6-.01*hg),ctxg.closePath(),ctxg.stroke(),ctxg.fillText("0",.14*wg,5*hg/6),ctxg.fillStyle="black",ctxg.fillText("time",.98*wg,1.15*hg/6),ctxg.fillText("time",.98*wg,3.15*hg/6),ctxg.fillText("time",.98*wg,5.15*hg/6),ctxg.textAlign="center",ctxg.save(),ctxg.translate(0,0),ctxg.rotate(-Math.PI/2),ctxg.fillStyle="black",ctxg.fillStyle="darkgreen",1==drawenergraphs&&(ctxg.fillStyle="blue"),0==drawenergraphs&&ctxg.fillText("position",-hg/6,.08*wg),1==drawenergraphs&&ctxg.fillText("Kinetic energy",-hg/6,.08*wg),ctxg.fillStyle="black",ctxg.fillStyle="darkblue",1==drawenergraphs&&(ctxg.fillStyle="blue"),0==drawenergraphs&&ctxg.fillText("speed",3*-hg/6,.08*wg),1==drawenergraphs&&ctxg.fillText("Potential energy",3*-hg/6,.08*wg),ctxg.fillStyle="black",ctxg.fillStyle="purple",1==drawenergraphs&&(ctxg.fillStyle="green"),0==drawenergraphs&&ctxg.fillText("acceleration",5*-hg/6,.08*wg),1==drawenergraphs&&ctxg.fillText("Total energy",5*-hg/6,.08*wg),ctxg.restore()}function showgraphs(){document.getElementById("graph").style.zIndex="3",ctxg.lineWidth=3,0==gcount&&(ctxg.clearRect(0,0,canvasgraph.width,canvasgraph.height),showgraphaxesandtext(),1==drawacircle&&0==drawenergraphs&&(ctxg.textAlign="center",ctxg.save(),ctxg.translate(0,0),ctxg.rotate(-Math.PI/2),ctxg.fillStyle="black",0==drawenergraphs&&(ctxg.fillStyle="black",ctxg.fillText("Tangential",-hg/6,.05*wg),ctxg.fillText("Tangential",3*-hg/6,.05*wg),ctxg.fillText("Tangential",5*-hg/6,.05*wg)),ctxg.restore()),0==drawacircle&&0==drawenergraphs&&(ctxg.textAlign="center",ctxg.save(),ctxg.translate(0,0),ctxg.rotate(-Math.PI/2),ctxg.fillStyle="black",ctxg.fillText("Tangential",-hg/6,.05*wg),ctxg.fill(),ctxg.fillStyle="red",ctxg.fillText("Translational",3*-hg/6,.05*wg),0==ballreachedcircle?ctxg.fillText("Translational",5*-hg/6,.05*wg):ctxg.fillText("Vertical",5*-hg/6,.05*wg),ctxg.restore())),0==stop&&(0==slowmo&&0==dofreeze&&(gcount+=.5),1==slowmo&&0==dofreeze&&(gcount+=.05),.15*wg+.002*(gcount-1)*wg>canvasgraph.width&&(gcount=0,writetangential=!0,writelinear=!0,ballisontrackforgraph=0),1==writetangential&&1==ballleftramp&&0==drawenergraphs&&(ctxg.textAlign="center",ctxg.clearRect(.02*wg,.3*hg,.048*wg,.68*hg),ctxg.save(),ctxg.translate(0,0),ctxg.rotate(-Math.PI/2),ctxg.fillStyle="black",ctxg.fillText("Tangential",3*-hg/6,.05*wg),ctxg.fillText("Tangential",5*-hg/6,.05*wg),ctxg.restore(),writelinear=!0,writetangential=!1),1==writelinear&&0==drawacircle&&0==drawenergraphs&&(ctxg.textAlign="center",ctxg.clearRect(.02*wg,.3*hg,.048*wg,.68*hg),ctxg.save(),ctxg.translate(0,0),ctxg.rotate(-Math.PI/2),ctxg.fillStyle="red",ctxg.fillText("Translational",3*-hg/6,.05*wg),0==ballreachedcircle?ctxg.fillText("Translational",5*-hg/6,.05*wg):ctxg.fillText("Vertical",5*-hg/6,.05*wg),ctxg.restore(),writelinear=!1,writetangential=!0),ctxg.strokeStyle="green",ctxg.fillStyle="green",1==drawacircle&&1==lastmotionCorT&&1==ballleftramp&&0==drawenergraphs&&(gcount<=2||gcount>ballisontrackforgraph+2)&&0!=iteration&&(ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*(gcount+1)*wg,hg/6-iteration*radius*.045*hg),ctxg.lineTo(.15*wg+.002*gcount*wg,hg/6-lastposition*radius*.045*hg),ctxg.closePath(),ctxg.stroke()),1==ballisonramp&&0==lastmotionCorT&&0==drawenergraphs&&(ctxg.strokeStyle="red",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*(gcount+1)*wg,hg/6-.05*rampdist*hg),ctxg.lineTo(.15*wg+.002*gcount*wg,hg/6-.05*rampdist*hg),ctxg.closePath(),ctxg.stroke()),1==drawenergraphs&&(1==drawacircle&&1==lastmotionCorT&&(ctxg.strokeStyle="blue",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,hg/3-.01*hg-.006*lastke*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,hg/3-.01*hg-.006*ke*hg),ketemp=ke,ctxg.closePath(),ctxg.stroke()),1==ballisonramp&&0==lastmotionCorT&&(ctxg.strokeStyle="blue",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,hg/3-.01*hg-.006*lastke*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,hg/3-.01*hg-.006*ke*hg),ketemp=ke,ctxg.closePath(),ctxg.stroke()),0==drawacircle&&0==lastmotionCorT&&(ctxg.strokeStyle="red",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,hg/3-.01*hg-.006*lastkedrop*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,hg/3-.01*hg-.006*kedrop*hg),ketemp=kedrop,ctxg.closePath(),ctxg.stroke())),ctxg.setLineDash([]),ctxg.strokeStyle="blue",ctxg.fillStyle="blue",1==drawacircle&&1==lastmotionCorT&&0==drawenergraphs&&1==ballleftramp&&(gcount<=2||gcount>ballisontrackforgraph+2)&&(ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,3*hg/6+.02*lastspeed*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,3*hg/6+.02*speed*hg),ctxg.stroke()),1==ballisonramp&&0==lastmotionCorT&&0==drawenergraphs&&(ctxg.strokeStyle="red",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,3*hg/6+.02*rampspeed*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,3*hg/6+.02*rampspeed*hg),ctxg.closePath(),ctxg.stroke()),0==drawacircle&&0==lastmotionCorT&&0==drawenergraphs&&(ctxg.strokeStyle="red",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,3*hg/6+.02*Math.abs(Math.sqrt(lastlinspeed))*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,3*hg/6+.02*Math.abs(Math.sqrt(2*kedrop/mass))*hg),ctxg.closePath(),ctxg.stroke(),ctxg.strokeStyle="blue"),1==drawenergraphs&&(1==drawacircle&&1==lastmotionCorT&&(ctxg.strokeStyle="blue",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,4*hg/6-.01*hg+.006*-petemp*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,4*hg/6-.01*hg+.006*-pe*hg),petemp=pe,ctxg.closePath(),ctxg.stroke()),1==ballisonramp&&0==lastmotionCorT&&(ctxg.strokeStyle="blue",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,4*hg/6-.01*hg+.006*-lastpe*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,4*hg/6-.01*hg+.006*-pe*hg),petemp=pe,ctxg.closePath(),ctxg.stroke()),0==drawacircle&&0==lastmotionCorT&&(ctxg.strokeStyle="red",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,4*hg/6-.01*hg+.006*-lastpedrop*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,4*hg/6-.01*hg+.006*-pedrop*hg),petemp=pedrop,ctxg.closePath(),ctxg.stroke())),ctxg.strokeStyle="purple",ctxg.fillStyle="purple",1==drawacircle&&1==lastmotionCorT&&0==drawenergraphs&&1==ballleftramp&&(gcount<=2||gcount>ballisontrackforgraph+2)&&(ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,5*hg/6+.06*lasta*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,5*hg/6+grav*h1*15e-5*Math.sin(iteration)*.06*hg),ctxg.closePath(),ctxg.stroke()),1==ballisonramp&&0==drawenergraphs&&0==lastmotionCorT&&(ctxg.strokeStyle="red",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,5*hg/6-.0038*rampaccn*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,5*hg/6-.0038*rampaccn*hg),0==slowmo&&(ballisontrackforgraph+=.5),1==slowmo&&(ballisontrackforgraph+=.05),ctxg.closePath(),ctxg.stroke()),0==drawacircle&&0==drawenergraphs&&0==lastmotionCorT&&(ctxg.strokeStyle="red",ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,5*hg/6+.0042*grav*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,5*hg/6+.0042*grav*hg),ctxg.closePath(),ctxg.stroke(),ctxg.strokeStyle="purple"),1==drawenergraphs&&(1==drawacircle&&(ctxg.strokeStyle="green"),0==drawacircle&&(ctxg.strokeStyle="red"),ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,hg-.01*hg+.006*-lastkebottom*hg),ctxg.lineTo(.15*wg+.002*(gcount+1)*wg,hg-.01*hg+.006*-kebottom*hg),ctxg.closePath(),ctxg.stroke()),1==ballleftramp&&1==passedbottom&&passedbottomcount>=2&&(passedbottomcount>=2&&(passedbottomcount=0),fontBase=800,fontSize=18,ctxg.font=getFont2(),ctxg.strokeStyle="black",ctxg.fillStyle="black",ctxg.textAlign="center",ctxg.textBaseline="bottom",ctxg.lineWidth=1,ctxg.setLineDash([2,6]),ctxg.beginPath(),ctxg.moveTo(.15*wg+.002*gcount*wg,0),ctxg.lineTo(.15*wg+.002*gcount*wg,.95*hg),ctxg.closePath(),ctxg.stroke(),swangle=Math.acos((radius-Math.pow(speedbottom,2)/(2*grav))/radius),0==completecircle&&(period=2*Math.PI*Math.sqrt(radius/grav)+2*Math.PI*Math.sqrt(radius/grav)*Math.pow(swangle,2)/16+2*Math.PI*Math.sqrt(radius/grav)*11*Math.pow(swangle,4)/3072,ctxg.fillText(period.toFixed(2)+"s",.15*wg+.002*gcount*wg,.99*hg)),1==completecircle&&0==isNaN(circleperiod)&&ctxg.fillText(circleperiod.toFixed(2)+"s",.15*wg+.002*gcount*wg,.99*hg)),lastspeed=speed,lastlinspeed=2*kedrop/mass,lasta=grav*h1*15e-5*Math.sin(iteration),lastke=ke,lastpe=pe,lastkedrop=kedrop,lastpedrop=pedrop,lastkebottom=kebottom,1==drawacircle&&(lastmotionCorT=!0),0==drawacircle&&(lastmotionCorT=!1),1==ballisonramp&&(lastmotionCorT=!1)),fontBase=800,fontSize=18,ctxg.font=getFont2(),ctxg.fillStyle="green",ctxg.fillRect(.9*wg,.89*hg,.08*wg,.08*hg),ctxg.fillStyle="White",ctxg.textAlign="center",ctxg.textBaseline="middle",ctxg.fillText("Close",.94*wg,.93*hg),ctxg.textAlign="left",document.addEventListener("keypress",function(e){ctxg.clearRect(0,0,canvasgraph.width,canvasgraph.height),showgraph=!1,document.getElementById("graph").style.zIndex="-3"})}function draw(){ctxEq.canvas.width=.8*window.innerWidth,ctxEq.canvas.height=.8*window.innerHeight,canvasequations.width=canvasequations.height*(canvasequations.clientWidth/canvasequations.clientHeight),weq=canvasequations.width,heq=canvasequations.height,ctxInfo.canvas.width=.6*window.innerWidth,ctxInfo.canvas.height=.4*window.innerHeight,canvasinfo.width=canvasinfo.height*(canvasinfo.clientWidth/canvasinfo.clientHeight),winfo=canvasinfo.width,hinfo=canvasinfo.height,ctxg.canvas.width=.5*window.innerWidth,ctxg.canvas.height=.645*window.innerHeight,canvasgraph.width=canvasgraph.height*(canvasgraph.clientWidth/canvasgraph.clientHeight),wg=canvasgraph.width,hg=canvasgraph.height,.5*window.innerWidth>window.innerHeight&&(ctxB.canvas.width=8*window.innerHeight,ctxB.canvas.height=2*window.innerHeight),window.innerHeight>=.5*window.innerWidth&&(ctxB.canvas.width=1*window.innerWidth,ctxB.canvas.height=2*window.innerWidth)}function updateAnimation(){oldframetime=newframetime,newframetime=performance.now(),frametime=-.201*(timeforoneframe=newframetime-oldframetime),-1==dir&&(oldperiodtime=performance.now()),1==dir?(periodtime=performance.now(),theperiod=periodtime-oldperiodtime):periodtime=0,drawTheSim()}function frame(){updateAnimation(),requestAnimationFrame(frame)}document.getElementById("ballonrod").onclick=function(){thing=4},document.getElementById("ballonstring").onclick=function(){thing=3},document.getElementById("ballontrack").onclick=function(){thing=2},document.getElementById("ballonramp").onclick=function(){thing=1,stop=!0},document.body.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1,useCapture:!1}),radiusslider.oninput=function(){radius=Number(radiusslider.value).valueOf(),CenterToTopOfRamp=Math.sqrt(Math.pow(newx-.05*w1,2)+Math.pow(ballheight*h1-(radius+ballradius)*h1,2)),LengthOfRamp=Math.sqrt(Math.pow(CenterToTopOfRamp,2)-Math.pow((radius+ballradius)*w1,2)),rampangle=Math.PI/2-Math.atan((ballheight-(radius+ballradius))/((newx-.05*w1)/w1))-Math.asin((radius+ballradius)/(CenterToTopOfRamp/h1)),document.getElementById("ballheightRange").value>=radius&&thing>1&&(document.getElementById("ballheightSliderValue").value=radius,document.getElementById("ballheightRange").value=radius,ballheight=radius),htmltextchange()},masslider.oninput=function(){mass=Number(masslider.value).valueOf(),htmltextchange()},gslider.oninput=function(){if(grav=.5*Number(gslider.value).valueOf(),ctxB.clearRect(0,0,ctxB.canvas.width,ctxB.canvas.height),drawsky(),htmltextchange(),0==grav&&1==gnotzero){gzero=!0,gnotzero=!1;const e="html {\n                -webkit-filter: invert(100%);\n                -moz-filter: invert(100%);\n                -o-filter: invert(100%);\n                -ms-filter: invert(100%);\n            }",t=document.head,a=document.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)),t.appendChild(a)}if(grav>0&&1==gzero){gzero=!1,gnotzero=!0;const e="html {\n                -webkit-filter: invert(0%);\n                -moz-filter: invert(0%);\n                -o-filter: invert(0%);\n                -ms-filter: invert(0%);\n            }",t=document.head,a=document.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e)),t.appendChild(a)}},speedslider.oninput=function(){initialspeed=Number(speedslider.value).valueOf(),1==drawacircle&&(speedbottom=Number(speedslider.value).valueOf()),kebottom=.5*mass*speedbottom*speedbottom,0==speedbottom&&(kebottom=0),ypos=radius-radius*Math.cos(iteration),ke=kebottom-(pe=mass*grav*ypos),speed=dir*Math.sqrt(Math.abs(2*ke/mass)),centriF=mass*speed*speed/radius,radialw=(weight=mass*grav)*Math.cos(iteration),tension=centriF+radialw,htmltextchange(),drawthesim()},ballheightslider.oninput=function(){thing>1&&document.getElementById("ballheightRange").value>2*radius&&(document.getElementById("ballheightRange").value=2*radius),ballheight=Number(ballheightslider.value).valueOf(),CenterToTopOfRamp=Math.sqrt(Math.pow(newx-.05*w1,2)+Math.pow(ballheight*h1-(radius+ballradius)*h1,2)),LengthOfRamp=Math.sqrt(Math.pow(CenterToTopOfRamp,2)-Math.pow((radius+ballradius)*w1,2)),rampangle=Math.PI/2-Math.atan((ballheight-(radius+ballradius))/((newx-.05*w1)/w1))-Math.asin((radius+ballradius)/(CenterToTopOfRamp/h1)),htmltextchange()},starthasbeenpressed=!1,canvas1.addEventListener("mousemove",function(e){var t=getMousePos(canvas1,e);xMousePos=t.x,yMousePos=t.y,1==thing&&xMousePos<.5*w1&&1==stop&&1==setBallPositionWithMouse&&(document.getElementById("ballheightRange").value=(newy-yMousePos)/h1+radius,htmltextchange()),thing>1&&xMousePos>w1/2&&1==setBallPositionWithMouse&&1==stop&&(document.getElementById("ballheightRange").value=(newy-yMousePos)/h1+radius,drawacircle=!0,speedbottom=Math.sin(iteration)*Math.sqrt(2*grav*ypos+speed*speed),document.getElementById("speedRange").value=initialspeed,kebottom=.5*mass*speedbottom*speedbottom,0==speedbottom&&(kebottom=0),ypos=radius-radius*Math.cos(iteration),ke=kebottom-(pe=mass*grav*ypos),speed=dir*Math.sqrt(Math.abs(2*ke/mass)),centriF=mass*speed*speed/radius,radialw=(weight=mass*grav)*Math.cos(iteration),tension=centriF+radialw,document.getElementById("ballheightRange").value>2*radius&&(document.getElementById("ballheightRange").value=2*radius),htmltextchange())},!1),canvasgraph.addEventListener("mousemove",function(e){var t=getgMousePos(canvasgraph,e);xgMousePos=t.x,ygMousePos=t.y},!1),ctx1.canvas.addEventListener("mousedown",e=>{setBallPositionWithMouse=!0}),ctxg.canvas.addEventListener("mousedown",e=>{graphmouse()}),ctx1.canvas.addEventListener("mouseup",brian,!1),window.onresize=function(){draw(),drawTheSim(),drawsky(),1==showequations&&showtheequations(),1==showinfo&&showinfobox(),1==showgraph&&(lastspeed=speed,lasta=grav*h1*15e-5*Math.sin(iteration),showgraphs()),1==showgraph&&showgraphaxesandtext()},document.getElementById("pauseButton").onmousedown=function(){freeze(),1==dofreeze&&(document.getElementById("startButton").style.background="green",document.getElementById("pauseButton").style.background="gray"),0==dofreeze&&(document.getElementById("startButton").style.background="gray",document.getElementById("pauseButton").style.background="green")},document.getElementById("startButton").onmousedown=function(){dofreeze=!1,dofreezetop=!1,dofreezebottom=!1,dofreezeside=!1,flyaway=!1,document.getElementById("ballflyaway").checked=!1,document.getElementById("freezetopid").checked=!1,document.getElementById("freezebottomid").checked=!1,document.getElementById("freezesideid").checked=!1,flyaway=!1,0==grav&&0==initialspeed&&(document.getElementById("startButton").style.background="gray"),(ballheight>0&&grav>0||initialspeed>0)&&(starthasbeenpressed=!0,document.getElementById("startButton").style.background="gray",document.getElementById("resetButton").style.background="green",document.getElementById("pauseButton").style.background="green",grav=Number(gslider.value).valueOf(),ballheight=Number(ballheightslider.value).valueOf(),stop=!1,thing>1&&ballheight>2*radius&&grav>0&&(ballheight=2*radius,kebottom=.5*mass*grav*radius,speedbottom=Math.sqrt(2*kebottom/mass),speed=0,lastvpos=newx),savedballheight=ballheight,savedinitialspeed=initialspeed,initialspeed=Number(speedslider.value).valueOf(),savedgrav=grav,savedmass=mass,savedradius=radius,saveddir=dir,savediteration=iteration,totaltime=0,writetangential=!0,writelinear=!0,circleperiod=0,circletime=0,completecircle=!1,oldcircletime=0,htmltextchange(),document.getElementById("speedRange").value=speedbottom,drawsky())},document.getElementById("resetButton").onmousedown=function(){reset()},document.getElementById("slowButton").onmousedown=function(){1==(slowmo=!slowmo)&&(document.getElementById("slowButton").style.background="green"),0==slowmo&&(document.getElementById("slowButton").style.background="red")},flyaway=!1,draw(),htmltextchange(),requestAnimationFrame(frame);

</script></body></html>
